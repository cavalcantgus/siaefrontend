import{a as F}from"./axios-B7aoVuMY.js";import{N as ee}from"./NavBar-joDtFwrj.js";import{C as j,U as te}from"./utilsService-BUbsbTI3.js";import{_ as O,u as R,r as h,B as J,o as v,t as U,b as o,w as a,a as r,l as c,d as s,C as x,D as P,c as V,E as S,f as b,g as d,G as Y,p as I,H as g,n as H,I as L,F as N,v as Z,e as q,J as T,z as p,j as K,i as Q,K as w,L as W,M as X,N as $,O as E,P as le,Q as ae,R as oe,m as re,A,S as M,T as z,U as G}from"./index-Yxn3nK2L.js";import{B as ne}from"./BtnComeBack-BFW4qMxG.js";const ie={name:"NovoProdutor",components:{ConfirmButton:j},props:{onSubmit:Function,currentItem:{type:Object},files:Array,dialogAtivo:{type:Boolean,required:!0}},data:()=>({isSubmitting:!1,estadoCivilOptions:[{type:"Solteiro(a)",value:"solteiro"},{type:"Casado(a)",value:"casado"},{type:"Divorciado(a)",value:"divorciado"},{type:"Separado(a)",value:"separado"},{type:"Viúvo(a)",value:"viuvo"},{type:"União Estável",value:"uniao_estavel"}],escolaridadeOptions:[{type:"Ensino Fundamental Incompleto",value:"fundamental_incompleto"},{type:"Ensino Fundamental Completo",value:"fundamental_completo"},{type:"Ensino Médio Incompleto",value:"medio_incompleto"},{type:"Ensino Médio Completo",value:"medio_completo"},{type:"Ensino Técnico",value:"tecnico"},{type:"Ensino Superior Incompleto",value:"superior_incompleto"},{type:"Ensino Superior Completo",value:"superior_completo"},{type:"Pós-Graduação",value:"pos_graduacao"},{type:"Mestrado",value:"mestrado"},{type:"Doutorado",value:"doutorado"},{type:"Pós-Doutorado",value:"pos_doutorado"}],tiposContas:[{type:"Conta Corrente",value:"Conta Corrente"},{type:"Conta Poupança",value:"Conta Poupança"},{type:"Conta Salário",value:"Conta Salário"},{type:"Conta Digital",value:"Conta Digital"}],estado:[],municipio:[],requiredField:[t=>t!=null&&t!==""||"Obrigatório"],emailRules:[t=>!t||/.+@.+\..+/.test(t)||"E-mail deve ser válido"]}),watch:{dialogAtivo(t){t||this.resetState()}},computed:{isFormValid(){return!!(this.currentItem.nome&&this.currentItem.dataNascimento&&this.currentItem.endereco&&this.currentItem.escolaridade&&this.currentItem.estadoCivil&&this.currentItem.cpf&&this.currentItem.rg&&this.currentItem.cep&&this.currentItem.estado&&this.currentItem.municipio&&this.currentItem.banco&&this.currentItem.agencia&&this.currentItem.tipoConta&&this.currentItem.conta&&this.currentItem.caf&&this.currentItem.validadeCaf&&this.files)},nomeRules(){return[t=>!!t||"Obrigatório",t=>/^[A-Za-zÀ-ÿ\s]+$/.test(t)||"Insira um nome válido"]},cpfRules(){return[t=>!t||this.validateCpf(t)||"CPF inválido"]},cepRules(){return[t=>!!t||"Obrigatório",t=>this.validateCep(t)||"CEP inválido"]},rgRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateRg(t)||"RG inválido"]},contatoRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateContato(t)||"N° de contato inválido"]}},methods:{async validateProducerCPF(t){try{return!(await F.get("/public/produtores")).data.some(l=>l.cpf===t)}catch(e){console.error("Ocorreu um erro: ",e)}},resetState(){for(let t=0;t<this.files.length;t++)this.files.pop(t);Object.keys(this.currentItem).forEach(t=>{this.currentItem[t]=null})},async localOnSubmit(){const t=R();if(this.format(),this.currentItem.nome=this.currentItem.nome.toUpperCase(),!await this.validateProducerCPF(this.currentItem.cpf)){t.warning("CPF já cadastrado anteriormente");return}try{this.currentItem.estado=this.currentItem.estado.nome,this.currentItem.municipio=this.currentItem.municipio.nome;const l={...this.currentItem,files:[...this.files]};console.log(l),this.onSubmit(l)}catch(l){console.log("Erro: ",l)}},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.estado=t.data}catch(t){console.log("Erro: ",t)}},async getCd(t){console.log("Teste de chamada");const e=t.sigla;try{const l=await F.get(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios`);console.log("Municípios: ",l.data),this.municipio=l.data}catch(l){console.log("Erro: ",l)}},triggerFileInput(){this.$refs.fileInput.click()},handleFiles(){const t=Array.from(event.target.files);this.files.push(...t),console.log(this.files)},deleteFile(t){this.files.pop(t)},format(){var t,e,l,m;this.currentItem.cpf=(t=this.currentItem.cpf)==null?void 0:t.replace(/\.|\-/g,""),this.currentItem.cep=(e=this.currentItem.cep)==null?void 0:e.replace(/\.|\-/g,""),this.currentItem.rg=(l=this.currentItem.rg)==null?void 0:l.replace(/\.|\-/g,""),this.currentItem.contato=(m=this.currentItem.contato)==null?void 0:m.replace(/\.|\-|\(|\)|\s/g,"")},validateCpf(t){const e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1+$/.test(t))return!1;let l=0;for(let i=0;i<9;i++)l+=parseInt(e.charAt(i))*(10-i);if((l%11<2?0:11-l%11)!==parseInt(e.charAt(9)))return!1;l=0;for(let i=0;i<10;i++)l+=parseInt(e.charAt(i))*(11-i);return!((l%11<2?0:11-l%11)!==parseInt(e.charAt(10))||e.length!==11)},validateCep(t){return!(t.replace(/\D/g,"").length!==8||!/^[0-9]{5}-?[0-9]{3}$/.test(t))},validateRg(t){return t.replace(/\D/g,"").length!==13?!1:/^[0-9]{4}\.[0-9]{4}\.[0-9]{4}-[0-9]{1}$/.test(t)},validateContato(t){return t.replace(/\D/g,"").length!==11?!1:/^\s?\(?\d{2}\)?\s?\d{5}-\d{4}$/.test(t)}},mounted(){this.getUF()}},se={class:"pa-4 pr-12 pl-12"},de={class:"grid-container"},ue={class:"file-name"};function me(t,e,l,m,f,i){const C=h("ConfirmButton"),y=J("mask");return v(),U("div",se,[o(Q,{onSubmit:K(i.localOnSubmit,["prevent"]),ref:"formRef"},{default:a(()=>[r("div",de,[o(c,{class:"flex-item-nome",density:"compact",name:"nome",modelValue:l.currentItem.nome,"onUpdate:modelValue":e[0]||(e[0]=n=>l.currentItem.nome=n),variant:"outlined",rules:i.nomeRules},{label:a(()=>e[19]||(e[19]=[r("span",null,[s("Nome "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"data_de_nascimento",label:"Data de nascimento",modelValue:l.currentItem.dataNascimento,"onUpdate:modelValue":e[1]||(e[1]=n=>l.currentItem.dataNascimento=n),variant:"outlined",type:"date",rules:t.requiredField},{label:a(()=>e[20]||(e[20]=[r("span",null,[s("Data de Nascimento "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"flex-item-email",density:"compact",name:"email",label:"Email",modelValue:l.currentItem.email,"onUpdate:modelValue":e[2]||(e[2]=n=>l.currentItem.email=n),rules:t.emailRules,variant:"outlined"},null,8,["modelValue","rules"]),o(c,{density:"compact",name:"endereco",label:"Endereço",modelValue:l.currentItem.endereco,"onUpdate:modelValue":e[3]||(e[3]=n=>l.currentItem.endereco=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[21]||(e[21]=[r("span",null,[s("Endereço "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(x,{density:"compact",name:"escolaridade",items:t.escolaridadeOptions,"item-title":"type","item-value":"value",modelValue:l.currentItem.escolaridade,"onUpdate:modelValue":e[4]||(e[4]=n=>l.currentItem.escolaridade=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[22]||(e[22]=[r("span",null,[s("Escolaridade "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(x,{density:"compact",name:"estado-civil",items:t.estadoCivilOptions,"item-title":"type","item-value":"value",modelValue:l.currentItem.estadoCivil,"onUpdate:modelValue":e[5]||(e[5]=n=>l.currentItem.estadoCivil=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[23]||(e[23]=[r("span",null,[s("Estado Civil "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),P((v(),V(c,{density:"compact",name:"cpf",label:"CPF",modelValue:l.currentItem.cpf,"onUpdate:modelValue":e[6]||(e[6]=n=>l.currentItem.cpf=n),variant:"outlined",rules:i.cpfRules},{label:a(()=>e[24]||(e[24]=[r("span",null,[s("CPF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"###.###.###-##"]]),P((v(),V(c,{density:"compact",name:"rg",label:"RG",modelValue:l.currentItem.rg,"onUpdate:modelValue":e[7]||(e[7]=n=>l.currentItem.rg=n),variant:"outlined",rules:i.rgRules},{label:a(()=>e[25]||(e[25]=[r("span",null,[s("RG "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"####.####.####-#"]]),P((v(),V(c,{density:"compact",name:"cep",label:"CEP",modelValue:l.currentItem.cep,"onUpdate:modelValue":e[8]||(e[8]=n=>l.currentItem.cep=n),variant:"outlined",rules:i.cepRules},{label:a(()=>e[26]||(e[26]=[r("span",null,[s("CEP "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"#####-###"]]),P(o(c,{density:"compact",name:"contato",label:"Contato",modelValue:l.currentItem.contato,"onUpdate:modelValue":e[9]||(e[9]=n=>l.currentItem.contato=n),rules:i.contatoRules,variant:"outlined"},null,8,["modelValue","rules"]),[[y," (##) #####-####"]]),o(S,{items:t.estado,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"estado",label:"Estado",modelValue:l.currentItem.estado,"onUpdate:modelValue":[e[10]||(e[10]=n=>l.currentItem.estado=n),i.getCd],"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:a(()=>e[27]||(e[27]=[r("span",null,[s("Estado "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","onUpdate:modelValue","rules"]),o(S,{items:t.municipio,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"municipio",label:"Município",modelValue:l.currentItem.municipio,"onUpdate:modelValue":e[11]||(e[11]=n=>l.currentItem.municipio=n),"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:a(()=>e[28]||(e[28]=[r("span",null,[s("Municipio "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{density:"compact",name:"banco",label:"Banco",modelValue:l.currentItem.banco,"onUpdate:modelValue":e[12]||(e[12]=n=>l.currentItem.banco=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[29]||(e[29]=[r("span",null,[s("Banco "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{density:"compact",name:"agencia",label:"Agência",modelValue:l.currentItem.agencia,"onUpdate:modelValue":e[13]||(e[13]=n=>l.currentItem.agencia=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[30]||(e[30]=[r("span",null,[s("Agência "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(x,{"max-width":"220px",density:"compact",name:"tipo-conta",items:t.tiposContas,"item-title":"type","item-value":"value",modelValue:l.currentItem.tipoConta,"onUpdate:modelValue":e[14]||(e[14]=n=>l.currentItem.tipoConta=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[31]||(e[31]=[r("span",null,[s("Tipo de Conta "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"conta",label:"Conta",modelValue:l.currentItem.conta,"onUpdate:modelValue":e[15]||(e[15]=n=>l.currentItem.conta=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[32]||(e[32]=[r("span",null,[s("Conta "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"caf",label:"CAF",modelValue:l.currentItem.caf,"onUpdate:modelValue":e[16]||(e[16]=n=>l.currentItem.caf=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[33]||(e[33]=[r("span",null,[s("CAF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"validade-caf",label:"Data de Validade CAF",modelValue:l.currentItem.validadeCaf,"onUpdate:modelValue":e[17]||(e[17]=n=>l.currentItem.validadeCaf=n),variant:"outlined",type:"date","append-inner":"mdi-calendar",rules:t.requiredField},{label:a(()=>e[34]||(e[34]=[r("span",null,[s("Validade Da CAF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(b,{justify:"end",dense:"",class:"w-100 mb-5 mt-3"},{default:a(()=>[o(d,null,{default:a(()=>[o(Y,{modelValue:this.currentItem.sexo,"onUpdate:modelValue":e[18]||(e[18]=n=>this.currentItem.sexo=n),class:"elevation-2"},{default:a(()=>[o(I,{value:"Masculino",color:this.currentItem.sexo==="Masculino"?"#2d47d0":""},{default:a(()=>[e[36]||(e[36]=s("Masculino")),o(g,null,{default:a(()=>e[35]||(e[35]=[s("mdi-gender-male")])),_:1})]),_:1},8,["color"]),o(I,{value:"Feminino",color:this.currentItem.sexo==="Feminino"?"pink":""},{default:a(()=>[e[38]||(e[38]=s("Feminino")),o(g,null,{default:a(()=>e[37]||(e[37]=[s("mdi-gender-female")])),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(H,{class:"upload-container"},{default:a(()=>[o(I,{color:"primary",onClick:i.triggerFileInput,class:"upload-btn"},{default:a(()=>[o(g,{left:""},{default:a(()=>e[39]||(e[39]=[s("mdi-upload")])),_:1}),e[40]||(e[40]=s(" Upload de arquivos "))]),_:1},8,["onClick"]),o(L,{ref:"fileInput",multiple:"",accept:".pdf,.doc,.docx,.jpg,.png",onChange:i.handleFiles,class:"hidden-input"},null,8,["onChange"]),o(b,{density:"compact",class:"file-list",justify:"center"},{default:a(()=>[(v(!0),U(N,null,Z(l.files,(n,k)=>(v(),V(d,{key:k,class:"file-item",cols:"12",md:"2"},{default:a(()=>[o(q,{class:"elevation-0 file-card"},{default:a(()=>[o(T,{class:"pa-0"},{default:a(()=>[o(g,{size:"20",onClick:B=>i.deleteFile(n),class:"d-flex ml-10 cursor-pointer h-auto"},{default:a(()=>e[41]||(e[41]=[s("mdi-close")])),_:2},1032,["onClick"]),o(g,{class:"file-icon"},{default:a(()=>e[42]||(e[42]=[s("mdi-file")])),_:1}),r("span",ue,p(n.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["onSubmit"]),o(b,{class:"justify-end dense pt-6"},{default:a(()=>[o(d,{class:"text-end"},{default:a(()=>[o(w,{location:"top",disabled:i.isFormValid},{activator:a(({props:n})=>[r("span",W(X(n)),[o(C,{color:i.isFormValid?"success":"grey",onConfirm:i.localOnSubmit,loading:t.isSubmitting,disabled:!i.isFormValid||t.isSubmitting},{default:a(()=>e[43]||(e[43]=[s("Salvar")])),_:1},8,["color","onConfirm","loading","disabled"])],16)]),default:a(()=>[e[44]||(e[44]=r("span",null,"Preencha todos os campos obrigatórios (*) para habilitar o botão",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])}const pe=O(ie,[["render",me],["__scopeId","data-v-4b700c9a"]]),ce={name:"EditProdutor",components:{ConfirmButton:j},props:{onSubmit:Function,currentItem:{type:Object},files:Array},data:()=>({isSubmitting:!1,estadoCivilOptions:[{type:"Solteiro(a)",value:"solteiro"},{type:"Casado(a)",value:"casado"},{type:"Divorciado(a)",value:"divorciado"},{type:"Separado(a)",value:"separado"},{type:"Viúvo(a)",value:"viuvo"},{type:"União Estável",value:"uniao_estavel"}],escolaridadeOptions:[{type:"Ensino Fundamental Incompleto",value:"fundamental_incompleto"},{type:"Ensino Fundamental Completo",value:"fundamental_completo"},{type:"Ensino Médio Incompleto",value:"medio_incompleto"},{type:"Ensino Médio Completo",value:"medio_completo"},{type:"Ensino Técnico",value:"tecnico"},{type:"Ensino Superior Incompleto",value:"superior_incompleto"},{type:"Ensino Superior Completo",value:"superior_completo"},{type:"Pós-Graduação",value:"pos_graduacao"},{type:"Mestrado",value:"mestrado"},{type:"Doutorado",value:"doutorado"},{type:"Pós-Doutorado",value:"pos_doutorado"}],tiposContas:[{type:"Conta Corrente",value:"Conta Corrente"},{type:"Conta Poupança",value:"Conta Poupança"},{type:"Conta Salário",value:"Conta Salário"},{type:"Conta Digital",value:"Conta Digital"}],estado:[],municipio:[],requiredField:[t=>t!=null&&t!==""||"Obrigatório"],emailRules:[t=>!!t||"E-mail é obrigatório",t=>!t||/.+@.+\..+/.test(t)||"E-mail deve ser válido"]}),computed:{isFormValid(){return!!(this.currentItem.nome&&this.currentItem.dataNascimento&&this.currentItem.endereco&&this.currentItem.escolaridade&&this.currentItem.estadoCivil&&this.currentItem.cpf&&this.currentItem.rg&&this.currentItem.cep&&this.currentItem.estado&&this.currentItem.municipio&&this.currentItem.banco&&this.currentItem.agencia&&this.currentItem.tipoConta&&this.currentItem.conta&&this.currentItem.caf&&this.currentItem.validadeCaf&&this.files)},nomeRules(){return[t=>!!t||"Obrigatório",t=>/^[A-Za-zÀ-ÿ\s]+$/.test(t)||"Insira um nome válido"]},cpfRules(){return[t=>!t||this.validateCpf(t)||"CPF inválido"]},cepRules(){return[t=>!!t||"Obrigatório",t=>this.validateCep(t)||"CEP inválido"]},rgRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateRg(t)||"RG inválido"]},contatoRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateContato(t)||"N° de contato inválido"]}},methods:{async localOnSubmit(){this.format(),this.currentItem.nome=this.currentItem.nome.toUpperCase();try{this.currentItem.estado=this.currentItem.estado.nome,this.currentItem.municipio=this.currentItem.municipio.nome,this.onSubmit({currentItem:{...this.currentItem},files:[...this.files]})}catch(t){console.log("Erro: ",t)}},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.estado=t.data}catch(t){console.log("Erro: ",t)}},async getCd(t){console.log("Teste de chamada");const e=t.sigla;try{const l=await F.get(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios`);console.log("Municípios: ",l.data),this.municipio=l.data}catch(l){console.log("Erro: ",l)}},triggerFileInput(){this.$refs.fileInput.click()},handleFiles(){const t=Array.from(event.target.files);this.files.push(...t),console.log(this.files)},deleteFile(t){this.files.pop(t)},format(){var t,e,l,m;this.currentItem.cpf=(t=this.currentItem.cpf)==null?void 0:t.replace(/\.|\-/g,""),this.currentItem.cep=(e=this.currentItem.cep)==null?void 0:e.replace(/\.|\-/g,""),this.currentItem.rg=(l=this.currentItem.rg)==null?void 0:l.replace(/\.|\-/g,""),this.currentItem.contato=(m=this.currentItem.contato)==null?void 0:m.replace(/\.|\-|\(|\)|\s/g,"")},validateCpf(t){const e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1+$/.test(t))return!1;let l=0;for(let i=0;i<9;i++)l+=parseInt(e.charAt(i))*(10-i);if((l%11<2?0:11-l%11)!==parseInt(e.charAt(9)))return!1;l=0;for(let i=0;i<10;i++)l+=parseInt(e.charAt(i))*(11-i);return!((l%11<2?0:11-l%11)!==parseInt(e.charAt(10))||e.length!==11)},validateCep(t){return!(t.replace(/\D/g,"").length!==8||!/^[0-9]{5}-?[0-9]{3}$/.test(t))},validateRg(t){return t.replace(/\D/g,"").length!==13?!1:/^[0-9]{4}\.[0-9]{4}\.[0-9]{4}-[0-9]{1}$/.test(t)},validateContato(t){return t.replace(/\D/g,"").length!==11?!1:/^\s?\(?\d{2}\)?\s?\d{5}-\d{4}$/.test(t)}},mounted(){this.getUF()}},fe={class:"pa-4 pr-12 pl-12"},ge={class:"grid-container"},ve={class:"file-name"};function ye(t,e,l,m,f,i){const C=h("ConfirmButton"),y=J("mask");return v(),U("div",fe,[o(Q,{onSubmit:K(i.localOnSubmit,["prevent"]),ref:"formRef"},{default:a(()=>[r("div",ge,[o(c,{class:"flex-item-nome",density:"compact",name:"nome",modelValue:l.currentItem.nome,"onUpdate:modelValue":e[0]||(e[0]=n=>l.currentItem.nome=n),variant:"outlined",rules:i.nomeRules},{label:a(()=>e[19]||(e[19]=[r("span",null,[s("Nome "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"data_de_nascimento",label:"Data de nascimento",modelValue:l.currentItem.dataNascimento,"onUpdate:modelValue":e[1]||(e[1]=n=>l.currentItem.dataNascimento=n),variant:"outlined",type:"date",rules:t.requiredField},{label:a(()=>e[20]||(e[20]=[r("span",null,[s("Data de Nascimento "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"flex-item-email",density:"compact",name:"email",label:"Email",modelValue:l.currentItem.email,"onUpdate:modelValue":e[2]||(e[2]=n=>l.currentItem.email=n),rules:t.emailRules,variant:"outlined"},null,8,["modelValue","rules"]),o(c,{density:"compact",name:"endereco",label:"Endereço",modelValue:l.currentItem.endereco,"onUpdate:modelValue":e[3]||(e[3]=n=>l.currentItem.endereco=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[21]||(e[21]=[r("span",null,[s("Endereço "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(x,{density:"compact",name:"escolaridade",items:t.escolaridadeOptions,"item-title":"type","item-value":"value",modelValue:l.currentItem.escolaridade,"onUpdate:modelValue":e[4]||(e[4]=n=>l.currentItem.escolaridade=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[22]||(e[22]=[r("span",null,[s("Escolaridade "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(x,{density:"compact",name:"estado-civil",items:t.estadoCivilOptions,"item-title":"type","item-value":"value",modelValue:l.currentItem.estadoCivil,"onUpdate:modelValue":e[5]||(e[5]=n=>l.currentItem.estadoCivil=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[23]||(e[23]=[r("span",null,[s("Estado Civil "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),P((v(),V(c,{density:"compact",name:"cpf",label:"CPF",modelValue:l.currentItem.cpf,"onUpdate:modelValue":e[6]||(e[6]=n=>l.currentItem.cpf=n),variant:"outlined",rules:i.cpfRules},{label:a(()=>e[24]||(e[24]=[r("span",null,[s("CPF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"###.###.###-##"]]),P((v(),V(c,{density:"compact",name:"rg",label:"RG",modelValue:l.currentItem.rg,"onUpdate:modelValue":e[7]||(e[7]=n=>l.currentItem.rg=n),variant:"outlined",rules:i.rgRules},{label:a(()=>e[25]||(e[25]=[r("span",null,[s("RG "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"####.####.####-#"]]),P((v(),V(c,{density:"compact",name:"cep",label:"CEP",modelValue:l.currentItem.cep,"onUpdate:modelValue":e[8]||(e[8]=n=>l.currentItem.cep=n),variant:"outlined",rules:i.cepRules},{label:a(()=>e[26]||(e[26]=[r("span",null,[s("CEP "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"#####-###"]]),P(o(c,{density:"compact",name:"contato",label:"Contato",modelValue:l.currentItem.contato,"onUpdate:modelValue":e[9]||(e[9]=n=>l.currentItem.contato=n),rules:i.contatoRules,variant:"outlined"},null,8,["modelValue","rules"]),[[y," (##) #####-####"]]),o(S,{items:t.estado,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"estado",label:"Estado",modelValue:l.currentItem.estado,"onUpdate:modelValue":[e[10]||(e[10]=n=>l.currentItem.estado=n),i.getCd],"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:a(()=>e[27]||(e[27]=[r("span",null,[s("Estado "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","onUpdate:modelValue","rules"]),o(S,{items:t.municipio,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"municipio",label:"Município",modelValue:l.currentItem.municipio,"onUpdate:modelValue":e[11]||(e[11]=n=>l.currentItem.municipio=n),"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:a(()=>e[28]||(e[28]=[r("span",null,[s("Municipio "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{density:"compact",name:"banco",label:"Banco",modelValue:l.currentItem.banco,"onUpdate:modelValue":e[12]||(e[12]=n=>l.currentItem.banco=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[29]||(e[29]=[r("span",null,[s("Banco "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{density:"compact",name:"agencia",label:"Agência",modelValue:l.currentItem.agencia,"onUpdate:modelValue":e[13]||(e[13]=n=>l.currentItem.agencia=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[30]||(e[30]=[r("span",null,[s("Agência "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(x,{"max-width":"220px",density:"compact",name:"tipo-conta",items:t.tiposContas,"item-title":"type","item-value":"value",modelValue:l.currentItem.tipoConta,"onUpdate:modelValue":e[14]||(e[14]=n=>l.currentItem.tipoConta=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[31]||(e[31]=[r("span",null,[s("Tipo de Conta "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"conta",label:"Conta",modelValue:l.currentItem.conta,"onUpdate:modelValue":e[15]||(e[15]=n=>l.currentItem.conta=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[32]||(e[32]=[r("span",null,[s("Conta "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"caf",label:"CAF",modelValue:l.currentItem.caf,"onUpdate:modelValue":e[16]||(e[16]=n=>l.currentItem.caf=n),variant:"outlined",rules:t.requiredField},{label:a(()=>e[33]||(e[33]=[r("span",null,[s("CAF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"validade-caf",label:"Data de Validade CAF",modelValue:l.currentItem.validadeCaf,"onUpdate:modelValue":e[17]||(e[17]=n=>l.currentItem.validadeCaf=n),variant:"outlined",type:"date","append-inner":"mdi-calendar",rules:t.requiredField},{label:a(()=>e[34]||(e[34]=[r("span",null,[s("Validade Da CAF "),r("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(b,{justify:"end",dense:"",class:"w-100 mb-5 mt-3"},{default:a(()=>[o(d,null,{default:a(()=>[o(Y,{modelValue:this.currentItem.sexo,"onUpdate:modelValue":e[18]||(e[18]=n=>this.currentItem.sexo=n),class:"elevation-2"},{default:a(()=>[o(I,{value:"Masculino",color:this.currentItem.sexo==="Masculino"?"#2d47d0":""},{default:a(()=>[e[36]||(e[36]=s("Masculino")),o(g,null,{default:a(()=>e[35]||(e[35]=[s("mdi-gender-male")])),_:1})]),_:1},8,["color"]),o(I,{value:"Feminino",color:this.currentItem.sexo==="Feminino"?"pink":""},{default:a(()=>[e[38]||(e[38]=s("Feminino")),o(g,null,{default:a(()=>e[37]||(e[37]=[s("mdi-gender-female")])),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(H,{class:"upload-container"},{default:a(()=>[o(I,{color:"primary",onClick:i.triggerFileInput,class:"upload-btn"},{default:a(()=>[o(g,{left:""},{default:a(()=>e[39]||(e[39]=[s("mdi-upload")])),_:1}),e[40]||(e[40]=s(" Upload de arquivos "))]),_:1},8,["onClick"]),o(L,{ref:"fileInput",multiple:"",accept:".pdf,.doc,.docx,.jpg,.png",onChange:i.handleFiles,class:"hidden-input"},null,8,["onChange"]),o(b,{density:"compact",class:"file-list",justify:"center"},{default:a(()=>[(v(!0),U(N,null,Z(l.files,(n,k)=>(v(),V(d,{key:k,class:"file-item",cols:"12",md:"2"},{default:a(()=>[o(q,{class:"elevation-0 file-card"},{default:a(()=>[o(T,{class:"pa-0"},{default:a(()=>[o(g,{size:"20",onClick:B=>i.deleteFile(n),class:"d-flex ml-10 cursor-pointer h-auto"},{default:a(()=>e[41]||(e[41]=[s("mdi-close")])),_:2},1032,["onClick"]),o(g,{class:"file-icon"},{default:a(()=>e[42]||(e[42]=[s("mdi-file")])),_:1}),r("span",ve,p(n.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["onSubmit"]),o(b,{class:"justify-end dense pt-6"},{default:a(()=>[o(d,{class:"text-end"},{default:a(()=>[o(w,{location:"top",disabled:i.isFormValid},{activator:a(({props:n})=>[r("span",W(X(n)),[o(C,{color:i.isFormValid?"success":"grey",onConfirm:i.localOnSubmit,loading:t.isSubmitting,disabled:!i.isFormValid||t.isSubmitting},{default:a(()=>e[43]||(e[43]=[s("Salvar")])),_:1},8,["color","onConfirm","loading","disabled"])],16)]),default:a(()=>[e[44]||(e[44]=r("span",null,"Preencha todos os campos obrigatórios (*) para habilitar o botão",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])}const Ce=O(ce,[["render",ye],["__scopeId","data-v-f0992409"]]),be={name:"ProdutorExpand",props:{produtorData:Object},data:()=>({productors:[],headers:[{title:"Arquivo",align:"start",sortable:!0,value:"fileName"},{title:"Tipo",align:"start",sortable:!0,value:"fileType"},{title:"Baixar",align:"start",sortable:!0,value:"download"},{title:"Remover",align:"start",sortable:!0,value:"remove"}]}),methods:{getAge(t){const e=new Date,l=new Date(t);let m=e.getFullYear()-l.getFullYear();const f=e.getMonth()-l.getMonth();return(f<0||f===0&&e.getDate()<l.getDate())&&m--,m},downloadFile(t){const e=`http://localhost:8080/document/download/${t==null?void 0:t.fileName}`,l=document.createElement("a");l.href=e,l.download=t.fileName,document.body.appendChild(l),l.click(),document.body.removeChild(l)},async deleteFile(t){const e=R();console.log("Id do arquivo: ",t.id);try{const l=await F.delete(`/document/delete/${t.id}/${this.produtorData.id}`);if(l.status!==204)throw new Error("Erro: ",l.status);const m=this.produtorData.documentos.findIndex(f=>f.id===t.id);m!==-1&&this.produtorData.documentos.splice(m,1),e.success("Arquivo removido com sucesso!")}catch(l){e.error("Erro ao remover arquivo: ",l)}},async getProductors(){try{const t=await F.get("/public/produtores");Array.isArray(t.data)?this.productors=t.data:(console.log("A resposta da API não é um Array"),this.productors=[])}catch(t){console.log("Error: ",t),this.productors=[]}}},mounted(){var t;this.getProductors(),console.log((t=this.produtorData)==null?void 0:t.documentos)}},Ve={align:"start",class:"pa-2"},Ie={align:"start",class:"pa-2"},Fe={align:"start",class:"pa-2"},De={align:"start",class:"pa-2"};function we(t,e,l,m,f,i){return v(),U(N,null,[e[30]||(e[30]=r("h3",{class:"mt-2"},"Detalhes de Produtor",-1)),r("h4",Ve,[e[1]||(e[1]=s(" Dados Pessoais ")),o(g,null,{default:a(()=>e[0]||(e[0]=[s("mdi-file-account")])),_:1})]),o(b,{dense:"",style:{height:"150px"},class:"border-md pa-2"},{default:a(()=>[o(d,{cols:"3",align:"start",class:"h-50"},{default:a(()=>[e[2]||(e[2]=r("h4",null,"Nome:",-1)),r("p",null,p(l.produtorData.nome),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-50"},{default:a(()=>[e[3]||(e[3]=r("h4",null,"Idade:",-1)),r("p",null,p(i.getAge(l.produtorData.dataNascimento)),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-50"},{default:a(()=>[e[4]||(e[4]=r("h4",null,"Sexo:",-1)),r("p",null,p(l.produtorData.sexo),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-50"},{default:a(()=>[e[5]||(e[5]=r("h4",null,"Email:",-1)),r("p",null,p(l.produtorData.email),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:a(()=>[e[6]||(e[6]=r("h4",null,"Contato:",-1)),r("p",null,p(l.produtorData.contato),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:a(()=>[e[7]||(e[7]=r("h4",null,"CPF:",-1)),r("p",null,p(l.produtorData.cpf),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:a(()=>[e[8]||(e[8]=r("h4",null,"RG:",-1)),r("p",null,p(l.produtorData.rg),1)]),_:1})]),_:1}),r("h4",Ie,[e[10]||(e[10]=s(" Endereço ")),o(g,null,{default:a(()=>e[9]||(e[9]=[s("mdi-home")])),_:1})]),o(b,{dense:"",style:{height:"100px"},class:"border-md pa-2"},{default:a(()=>[o(d,{cols:"1",align:"start",class:"h-75"},{default:a(()=>[e[11]||(e[11]=r("h4",null,"Estado:",-1)),r("p",null,p(l.produtorData.estado),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:a(()=>[e[12]||(e[12]=r("h4",null,"Município:",-1)),r("p",null,p(l.produtorData.municipio),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-75"},{default:a(()=>[e[13]||(e[13]=r("h4",null,"Endereço:",-1)),r("p",null,p(l.produtorData.endereco),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-75"},{default:a(()=>[e[14]||(e[14]=r("h4",null,"CEP:",-1)),r("p",null,p(l.produtorData.cep),1)]),_:1})]),_:1}),o(b,{dense:"",style:{height:"50vh",width:"452px","margin-top":"34px","margin-bottom":"-50px","border-radius":"10px"},class:"float-end"},{default:a(()=>[o($,{items:l.produtorData.documentos,headers:t.headers,class:"h-75",align:"start",hover:!0,style:{"background-color":"#f4f1e4"}},{top:a(()=>e[15]||(e[15]=[r("h4",{align:"center",class:"pa-2"}," Documentos do produtor ",-1)])),"item.download":a(({item:C})=>[o(w,{location:"top"},{activator:a(({props:y})=>[o(I,E({icon:""},y,{onClick:n=>i.downloadFile(C),class:"elevation-0",color:"#f4f1e4"}),{default:a(()=>[o(g,{color:"primary"},{default:a(()=>e[16]||(e[16]=[s("mdi-download-box")])),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[e[17]||(e[17]=r("span",null,"Clique para baixar um arquivo",-1))]),_:2},1024)]),"item.remove":a(({item:C})=>[o(w,{location:"top"},{activator:a(({props:y})=>[o(I,E({icon:""},y,{onClick:n=>i.deleteFile(C),class:"elevation-0",color:"#f4f1e4"}),{default:a(()=>[o(g,{color:"red"},{default:a(()=>e[18]||(e[18]=[s("mdi-delete")])),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[e[19]||(e[19]=r("span",null,"Clique para remover um arquivo",-1))]),_:2},1024)]),_:2},1032,["items","headers"])]),_:1}),r("h4",Fe,[e[21]||(e[21]=s(" Dados Bancários ")),o(g,null,{default:a(()=>e[20]||(e[20]=[s("mdi-bank")])),_:1})]),o(b,{dense:"",style:{height:"100px",width:"50vw"},class:"border-md pa-2"},{default:a(()=>[o(d,{cols:"3",align:"start",class:"h-75"},{default:a(()=>[e[22]||(e[22]=r("h4",null,"Banco:",-1)),r("p",null,p(l.produtorData.banco),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:a(()=>[e[23]||(e[23]=r("h4",null,"Agência:",-1)),r("p",null,p(l.produtorData.agencia),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-75"},{default:a(()=>[e[24]||(e[24]=r("h4",null,"Tipo de Conta:",-1)),r("p",null,p(l.produtorData.tipoConta),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:a(()=>[e[25]||(e[25]=r("h4",null,"Conta:",-1)),r("p",null,p(l.produtorData.conta),1)]),_:1})]),_:1}),r("h4",De,[e[27]||(e[27]=s(" Dados da CAF ")),o(g,null,{default:a(()=>e[26]||(e[26]=[s("mdi-text-box-multiple-outline")])),_:1})]),o(b,{dense:"",style:{height:"120px",width:"50vw"},class:"border-md pa-2"},{default:a(()=>[o(d,{cols:"3",align:"start",class:"h-75"},{default:a(()=>[e[28]||(e[28]=r("h4",null,"CAF:",-1)),r("p",null,p(l.produtorData.caf),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:a(()=>[e[29]||(e[29]=r("h4",null,"Validade da CAF:",-1)),r("p",null,p(l.produtorData.validadeCaf),1)]),_:1})]),_:1})],64)}const Pe=O(be,[["render",we]]),he={name:"CadastroProdutor",components:{NavBar:ee,NovoProdutor:pe,ProdutorExpand:Pe,EditProdutor:Ce,BtnComeBack:ne,ConfirmButton:j},data:()=>({cafVencida:null,cafProxVenci:null,dialog:{create:!1,update:!1},search:"",singleExpand:!1,showFilters:!1,productors:[],headers:[{text:"Editar",align:"center",value:"edit",width:"50px"},{text:"Remover",align:"center",value:"delete",width:"50px"},{title:"Nome do Produtor",align:"center",sortable:!0,value:"nome"},{title:"Endereço",align:"center",sortable:!0,value:"endereco"},{title:"CAF",align:"center",sortable:!0,value:"validadeCaf"},{title:"CPF",align:"center",sortable:!0,value:"cpf"},{title:"CEP",align:"center",sortable:!0,value:"cep"},{title:"Estado",align:"center",sortable:!0,value:"estado"},{title:"Municipio",align:"center",sortable:!0,value:"municipio"}],newItem:{sexo:"Masculino"},files:[],selectedRow:{},expanded:[],filterActive:!1,filters:{estado:{value:null,compareType:"equal",prop:"estado"},municipio:{value:null,compareType:"equal",prop:"municipio"},sexo:{value:null,compareType:"equal",prop:"sexo"},cpf:{value:null,compareType:"equal",prop:"cpf"},cep:{value:null,compareType:"equal",prop:"cep"},estado_civil:{value:null,compareType:"equal",prop:"estadoCivil"}},uf:[],municipios:[],sexoOptions:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"}]}),watch:{filteredProductors:function(){this.validateCafs()},deep:!0},computed:{filteredProductors(){return this.productors.filter(t=>this.filters.estado.value?t.estado===this.filters.estado.value:!0).filter(t=>this.filters.municipio.value?t.municipio===this.filters.municipio.value:!0).filter(t=>this.filters.sexo.value?t.sexo===this.filters.sexo.value:!0)}},methods:{formatData(t){return te.formatData(t)},validateCafs(){this.cafVencida=0,this.cafProxVenci=0;const t=30,e=new Date,l=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(!this.filteredProductors||this.filteredProductors.length===0){console.warn("Nenhum produtor encontrado.");return}this.productors.forEach(m=>{const f=m==null?void 0:m.validadeCaf;f||console.warn("Data inválida: ",f);const i=new Date(f+"T00:00:00Z"),C=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate());console.log("Data da caf: ",C);const n=(C.getTime()-l.getTime())/(1e3*60*60*24);n>=0&&n<=t?this.cafProxVenci++:n<0&&this.cafVencida++,console.log(this.cafProxVenci),console.log(this.cafVencida)})},uniqueValidateCaf(t){const l=new Date,m=new Date(l.getFullYear(),l.getMonth(),l.getDate()),f=new Date(t+"T00:00:00Z"),y=(new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()).getTime()-m.getTime())/(1e3*60*60*24);return y>=0&&y<=30?1:y>30?2:3},onExpand(t){this.expanded!==t&&(this.expanded=t)},clearFilters(){Object.keys(this.filters).forEach(t=>{this.filters[t].value=null}),this.filterActive=!1,this.filtered=[]},async getProductors(){try{const t=await F.get("/public/produtores");console.log(t.data),this.productors=t.data}catch(t){console.log("Error: ",t),this.productors=[]}},async createProductor(){const t=R();try{const e=new FormData;this.files.forEach(m=>{e.append("file",m)}),e.append("produtor",JSON.stringify(this.newItem));const l=await F.post("/public/produtores/produtor",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(l.data),l.status!==201)throw new Error(`Erro: ${l.status}`);t.success("Produtor cadastrado com sucesso!")}catch(e){console.error("Erro: ",e),t.error("Erro ao cadastrar produtor: ",e)}finally{this.dialog.create=!1,this.getProductors()}},async updateProductor(t){const e=R(),{currentItem:l,files:m}=t;try{const f=new FormData;m.forEach(C=>{console.log("Arquivo enviado: ",C),f.append("file",C)}),f.append("produtor",JSON.stringify(l));const i=await F.put(`/public/produtores/atualizar/${l.id}`,f,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(i.data),i.status!==200)throw new Error(`Erro: ${i.status}`);e.success("Produtor atualizado com sucesso!")}catch(f){console.error("Erro: ",f),e.error("Erro ao atualizar produtor: ",f)}finally{this.dialog.update=!1,this.getProductors()}},async deleteProductor(t){const e=R();try{const l=await F.delete(`/public/produtores/produtor/${t.id}`,t);if(l.status!==204)throw new Error("Erro: ",l.status);e.success("Produtor removido com sucesso!")}catch(l){e.error("Erro ao deletar pesquisa: ",l),console.error("Erro: ",l)}finally{this.getProductors()}},onSelectRow(t,e){e==="update"&&(this.selectedRow=JSON.parse(JSON.stringify({...t})),this.dialog.update=!0),console.log("Linha selecionada: ",this.selectedRow)},onDeleteRow(t){this.selectedRow={...t},this.deleteProductor(this.selectedRow)},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.uf=t.data}catch(t){console.log("Erro: ",t)}},async getCd(){console.log("Teste de chamada");try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/municipios");console.log("Municípios: ",t.data),this.municipios=t.data}catch(t){console.log("Erro: ",t)}}},mounted(){this.getProductors(),this.getUF(),this.getCd()}},Ee={class:"d-flex align-center"},Ue={class:"d-flex flex-column ml-3 status-text align-start"},xe={key:0,class:"text-error text-xs font-weight-medium"},Ae={key:1,class:"text-warning text-xs font-weight-medium"},Se={style:{"background-color":"#f09900",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},ke={style:{"background-color":"#57a340",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},Re={style:{"background-color":"#e60200",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},qe={colspan:10,style:{"background-color":"#37622a",padding:"0"}},Te={style:{"max-height":"400px","overflow-y":"auto","background-color":"#37622a",padding:"16px"},class:"text-white expand"};function Oe(t,e,l,m,f,i){const C=h("NavBar"),y=h("BtnComeBack"),n=h("ConfirmButton"),k=h("ProdutorExpand"),B=h("NovoProdutor"),_=h("EditProdutor");return v(),U(N,null,[o(C),o(y),e[31]||(e[31]=r("h1",{style:{color:"#57a340","margin-top":"10px",padding:"30px","font-size":"3rem"}}," Cadastro de Produtores ",-1)),o(b,{justify:"center"},{default:a(()=>[o(d,{cols:"12"},{default:a(()=>[o($,{items:i.filteredProductors,headers:t.headers,search:t.search,"show-expand":"","single-expand":!0,expanded:t.expanded,"onUpdate:expanded":[e[6]||(e[6]=u=>t.expanded=u),i.onExpand],"fixed-header":!0,height:"700px"},{top:a(()=>[o(b,{class:"mt-2 mb-8 mx-3"},{default:a(()=>[o(d,{cols:"5"},{default:a(()=>[o(c,{class:"border rounded",dense:"",outlined:"","hide-details":"",modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=u=>t.search=u),label:"Pesquisar","append-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{class:"text-end",cols:"2"},{default:a(()=>[o(le,{location:"top start",bordered:"",overlap:""},{default:a(()=>[o(I,{class:"elevation-0",onClick:e[1]||(e[1]=u=>t.showFilters=!t.showFilters)},{default:a(()=>[t.showFilters?(v(),V(g,{key:1,left:"",size:"25px"},{default:a(()=>e[12]||(e[12]=[s("mdi-filter-off")])),_:1})):(v(),V(g,{key:0,size:"25px",left:""},{default:a(()=>e[11]||(e[11]=[s("mdi-filter")])),_:1})),e[13]||(e[13]=s(" FILTROS "))]),_:1})]),_:1})]),_:1}),o(d,{class:"button-group mr-4",align:"end"},{default:a(()=>[o(w,{location:"top"},{activator:a(({props:u})=>[o(I,E({color:"success",class:"elevation-3 compact-btn ml-3","min-width":"25%",onClick:e[2]||(e[2]=D=>t.dialog.create=!0)},u),{default:a(()=>[o(g,{small:"",class:"compact-icon",left:""},{default:a(()=>e[14]||(e[14]=[s("mdi-plus")])),_:1}),e[15]||(e[15]=r("div",{class:"d-flex flex-column compact-btn-text",style:{"font-size":"0.6rem"}},[r("span",null,"Novo"),s(),r("span",null,"Produtor")],-1))]),_:2},1040)]),default:a(()=>[e[16]||(e[16]=r("span",null,"Clique para adicionar um produtor",-1))]),_:1})]),_:1}),o(d,{cols:"12"},{default:a(()=>[o(ae,null,{default:a(()=>[P(o(q,{variant:"outlined",height:"150px"},{default:a(()=>[e[18]||(e[18]=r("h4",{class:"ml-4 mt-4",align:"start"},"Filtrar por",-1)),o(b,{dense:"",class:"py-2 px-4"},{default:a(()=>[o(d,{cols:2},{default:a(()=>[o(S,{density:"compact",variant:"outlined",items:t.uf,label:"Estado","item-title":"nome","item-value":"nome",modelValue:t.filters.estado.value,"onUpdate:modelValue":e[3]||(e[3]=u=>t.filters.estado.value=u),outlined:"",dense:"",clearable:""},null,8,["items","modelValue"])]),_:1}),o(d,{cols:2},{default:a(()=>[o(S,{density:"compact",variant:"outlined",items:t.municipios,label:"Município","item-title":"nome","item-value":"nome",modelValue:t.filters.municipio.value,"onUpdate:modelValue":e[4]||(e[4]=u=>t.filters.municipio.value=u),clearable:""},null,8,["items","modelValue"])]),_:1}),o(d,{cols:1},{default:a(()=>[o(x,{density:"compact",items:t.sexoOptions,label:"Sexo","item-title":"label","item-value":"value",modelValue:t.filters.sexo.value,"onUpdate:modelValue":e[5]||(e[5]=u=>t.filters.sexo.value=u),variant:"outlined",dense:"",clearable:""},null,8,["items","modelValue"])]),_:1})]),_:1}),o(re,null,{default:a(()=>[o(b,{dense:""},{default:a(()=>[o(d,{class:"text-end",height:"200"},{default:a(()=>[o(I,{align:"start",justify:"center",class:"pb-8",color:"error",text:"",elevation:"0",onClick:i.clearFilters},{default:a(()=>e[17]||(e[17]=[s(" Limpar filtros ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},512),[[oe,t.showFilters]])]),_:1})]),_:1})]),_:1}),o(b,{class:"mb-5 pl-1 ml-4"},{default:a(()=>[t.cafProxVenci>0||t.cafVencida>0?(v(),V(d,{key:0,cols:"auto",class:"pa-0 mr-4"},{default:a(()=>[e[20]||(e[20]=r("span",{class:"status-text"},"CAF",-1)),r("div",Ee,[o(g,{small:"",color:"error",left:""},{default:a(()=>e[19]||(e[19]=[s("mdi-alert")])),_:1}),r("div",Ue,[t.cafVencida>0?(v(),U("span",xe,p(t.cafVencida)+" "+p(t.cafVencida===1?"CAF":"CAFS")+" vencida(s) ",1)):A("",!0),t.cafProxVenci>0?(v(),U("span",Ae,p(t.cafProxVenci)+" "+p(t.cafProxVenci===1?"CAF":"CAFS")+" próxima(s) do vencimento ",1)):A("",!0)])])]),_:1})):A("",!0)]),_:1})]),"item.edit":a(({item:u})=>[o(w,{location:"top"},{activator:a(({props:D})=>[o(I,E({icon:""},D,{onClick:Ne=>i.onSelectRow(u,"update"),class:"elevation-0"}),{default:a(()=>[o(g,{color:"green"},{default:a(()=>e[21]||(e[21]=[s("mdi-pencil")])),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[e[22]||(e[22]=r("span",null,"Clique para editar um Produtor",-1))]),_:2},1024)]),"item.delete":a(({item:u})=>[o(w,{location:"top"},{activator:a(({props:D})=>[o(n,E({icon:""},D,{onConfirm:()=>i.onDeleteRow(u),class:"elevation-0"}),{default:a(()=>[o(g,{color:"red"},{default:a(()=>e[23]||(e[23]=[s("mdi-delete")])),_:1})]),_:2},1040,["onConfirm"])]),default:a(()=>[e[24]||(e[24]=r("span",null,"Clique para deletar um Produtor",-1))]),_:2},1024)]),"item.validadeCaf":a(({item:u})=>[o(w,{location:"top"},{activator:a(({props:D})=>[i.uniqueValidateCaf(u.validadeCaf)===1?(v(),V(M,E({key:0,color:"white"},D),{default:a(()=>[r("span",Se,p(i.formatData(u.validadeCaf)),1)]),_:2},1040)):A("",!0)]),default:a(()=>[e[25]||(e[25]=r("span",null,"A CAF está próxima de vencer",-1))]),_:2},1024),o(w,{location:"top"},{activator:a(({props:D})=>[i.uniqueValidateCaf(u.validadeCaf)===2?(v(),V(M,E({key:0,color:"white"},D),{default:a(()=>[r("span",ke,p(i.formatData(u.validadeCaf)),1)]),_:2},1040)):A("",!0)]),default:a(()=>[e[26]||(e[26]=r("span",null,"A CAF está longe de vencer",-1))]),_:2},1024),o(w,{location:"top"},{activator:a(({props:D})=>[i.uniqueValidateCaf(u.validadeCaf)===3?(v(),V(M,E({key:0,color:"white"},D),{default:a(()=>[r("span",Re,p(i.formatData(u.validadeCaf)),1)]),_:2},1040)):A("",!0)]),default:a(()=>[e[27]||(e[27]=r("span",null,"CAF vencida",-1))]),_:2},1024)]),"expanded-row":a(({item:u})=>[r("tr",null,[r("td",qe,[r("div",Te,[o(k,{produtorData:JSON.parse(JSON.stringify(u))},null,8,["produtorData"])])])])]),_:2},1032,["items","headers","search","expanded","onUpdate:expanded"]),o(z,{modelValue:t.dialog.create,"onUpdate:modelValue":e[8]||(e[8]=u=>t.dialog.create=u)},{default:a(()=>[o(q,{class:"card-form"},{default:a(()=>[o(T,{class:"sticky-title title-border"},{default:a(()=>[e[29]||(e[29]=s(" Cadastro de Produtor ")),o(G),o(I,{icon:"",class:"btn-close elevation-0",onClick:e[7]||(e[7]=u=>t.dialog.create=!1)},{default:a(()=>[o(g,{prepend:""},{default:a(()=>e[28]||(e[28]=[s(" mdi-close ")])),_:1})]),_:1})]),_:1}),o(B,{currentItem:t.newItem,onSubmit:i.createProductor,files:t.files,dialogAtivo:t.dialog.create},null,8,["currentItem","onSubmit","files","dialogAtivo"])]),_:1})]),_:1},8,["modelValue"]),o(z,{modelValue:t.dialog.update,"onUpdate:modelValue":e[10]||(e[10]=u=>t.dialog.update=u)},{default:a(()=>[o(q,{class:"card-form"},{default:a(()=>[o(T,{class:"sticky-title title-border"},{default:a(()=>[s(" Editar Produtor: "+p(t.selectedRow.id)+" ",1),o(G),o(I,{icon:"",class:"btn-close elevation-0",onClick:e[9]||(e[9]=u=>t.dialog.update=!t.dialog.update)},{default:a(()=>[o(g,{prepend:""},{default:a(()=>e[30]||(e[30]=[s(" mdi-close ")])),_:1})]),_:1})]),_:1}),o(_,{currentItem:t.selectedRow,onSubmit:i.updateProductor,files:t.files},null,8,["currentItem","onSubmit","files"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}const Je=O(he,[["render",Oe],["__scopeId","data-v-f5cc1c19"]]);export{Je as default};
