import{a as F}from"./axios-B7aoVuMY.js";import{N as _}from"./NavBar-CsRVFEAC.js";import{C as G,U as ee}from"./utilsService-C0rNWPRc.js";import{_ as T,r as E,B as J,o as v,t as P,b as o,w as l,a as n,l as c,d as s,C as A,D as h,c as V,E as S,f as b,g as d,G as Y,p as I,H as g,n as H,I as L,F as N,v as Z,e as q,J as R,z as m,j as K,i as Q,K as D,L as W,M as X,u as B,N as $,O as U,P as te,Q as le,R as ae,m as oe,A as x,S as M,T as j,U as z}from"./index-BU758cL5.js";import{B as ne}from"./BtnComeBack-1DO2PesR.js";const re={name:"NovoProdutor",components:{ConfirmButton:G},props:{onSubmit:Function,currentItem:{type:Object},files:Array,dialogAtivo:{type:Boolean,required:!0}},data:()=>({isSubmitting:!1,estadoCivilOptions:[{type:"Solteiro(a)",value:"solteiro"},{type:"Casado(a)",value:"casado"},{type:"Divorciado(a)",value:"divorciado"},{type:"Separado(a)",value:"separado"},{type:"Viúvo(a)",value:"viuvo"},{type:"União Estável",value:"uniao_estavel"}],escolaridadeOptions:[{type:"Ensino Fundamental Incompleto",value:"fundamental_incompleto"},{type:"Ensino Fundamental Completo",value:"fundamental_completo"},{type:"Ensino Médio Incompleto",value:"medio_incompleto"},{type:"Ensino Médio Completo",value:"medio_completo"},{type:"Ensino Técnico",value:"tecnico"},{type:"Ensino Superior Incompleto",value:"superior_incompleto"},{type:"Ensino Superior Completo",value:"superior_completo"},{type:"Pós-Graduação",value:"pos_graduacao"},{type:"Mestrado",value:"mestrado"},{type:"Doutorado",value:"doutorado"},{type:"Pós-Doutorado",value:"pos_doutorado"}],tiposContas:[{type:"Conta Corrente",value:"Conta Corrente"},{type:"Conta Poupança",value:"Conta Poupança"},{type:"Conta Salário",value:"Conta Salário"},{type:"Conta Digital",value:"Conta Digital"}],estado:[],municipio:[],requiredField:[t=>t!=null&&t!==""||"Obrigatório"],emailRules:[t=>!t||/.+@.+\..+/.test(t)||"E-mail deve ser válido"]}),watch:{dialogAtivo(t){t||this.resetState()}},computed:{isFormValid(){return!!(this.currentItem.nome&&this.currentItem.dataNascimento&&this.currentItem.endereco&&this.currentItem.escolaridade&&this.currentItem.estadoCivil&&this.currentItem.cpf&&this.currentItem.rg&&this.currentItem.cep&&this.currentItem.estado&&this.currentItem.municipio&&this.currentItem.banco&&this.currentItem.agencia&&this.currentItem.tipoConta&&this.currentItem.conta&&this.currentItem.caf&&this.currentItem.validadeCaf&&this.files)},nomeRules(){return[t=>!!t||"Obrigatório",t=>/^[A-Za-zÀ-ÿ\s]+$/.test(t)||"Insira um nome válido"]},cpfRules(){return[t=>!t||this.validateCpf(t)||"CPF inválido"]},cepRules(){return[t=>!!t||"Obrigatório",t=>this.validateCep(t)||"CEP inválido"]},rgRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateRg(t)||"RG inválido"]},contatoRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateContato(t)||"N° de contato inválido"]}},methods:{resetState(){for(let t=0;t<this.files.length;t++)this.files.pop(t);Object.keys(this.currentItem).forEach(t=>{this.currentItem[t]=null})},async localOnSubmit(){this.format(),this.currentItem.nome=this.currentItem.nome.toUpperCase();try{this.currentItem.estado=this.currentItem.estado.nome,this.currentItem.municipio=this.currentItem.municipio.nome;const t={...this.currentItem,files:[...this.files]};console.log(t),this.onSubmit(t)}catch(t){console.log("Erro: ",t)}},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.estado=t.data}catch(t){console.log("Erro: ",t)}},async getCd(t){console.log("Teste de chamada");const e=t.sigla;try{const a=await F.get(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios`);console.log("Municípios: ",a.data),this.municipio=a.data}catch(a){console.log("Erro: ",a)}},triggerFileInput(){this.$refs.fileInput.click()},handleFiles(){const t=Array.from(event.target.files);this.files.push(...t),console.log(this.files)},deleteFile(t){this.files.pop(t)},format(){var t,e,a,p;this.currentItem.cpf=(t=this.currentItem.cpf)==null?void 0:t.replace(/\.|\-/g,""),this.currentItem.cep=(e=this.currentItem.cep)==null?void 0:e.replace(/\.|\-/g,""),this.currentItem.rg=(a=this.currentItem.rg)==null?void 0:a.replace(/\.|\-/g,""),this.currentItem.contato=(p=this.currentItem.contato)==null?void 0:p.replace(/\.|\-|\(|\)|\s/g,"")},validateCpf(t){const e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1+$/.test(t))return!1;let a=0;for(let i=0;i<9;i++)a+=parseInt(e.charAt(i))*(10-i);if((a%11<2?0:11-a%11)!==parseInt(e.charAt(9)))return!1;a=0;for(let i=0;i<10;i++)a+=parseInt(e.charAt(i))*(11-i);return!((a%11<2?0:11-a%11)!==parseInt(e.charAt(10))||e.length!==11)},validateCep(t){return!(t.replace(/\D/g,"").length!==8||!/^[0-9]{5}-?[0-9]{3}$/.test(t))},validateRg(t){return t.replace(/\D/g,"").length!==13?!1:/^[0-9]{4}\.[0-9]{4}\.[0-9]{4}-[0-9]{1}$/.test(t)},validateContato(t){return t.replace(/\D/g,"").length!==11?!1:/^\s?\(?\d{2}\)?\s?\d{5}-\d{4}$/.test(t)}},mounted(){this.getUF()}},ie={class:"pa-4 pr-12 pl-12"},se={class:"grid-container"},de={class:"file-name"};function ue(t,e,a,p,f,i){const C=E("ConfirmButton"),y=J("mask");return v(),P("div",ie,[o(Q,{onSubmit:K(i.localOnSubmit,["prevent"]),ref:"formRef"},{default:l(()=>[n("div",se,[o(c,{class:"flex-item-nome",density:"compact",name:"nome",modelValue:a.currentItem.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>a.currentItem.nome=r),variant:"outlined",rules:i.nomeRules},{label:l(()=>e[19]||(e[19]=[n("span",null,[s("Nome "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"data_de_nascimento",label:"Data de nascimento",modelValue:a.currentItem.dataNascimento,"onUpdate:modelValue":e[1]||(e[1]=r=>a.currentItem.dataNascimento=r),variant:"outlined",type:"date",rules:t.requiredField},{label:l(()=>e[20]||(e[20]=[n("span",null,[s("Data de Nascimento "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"flex-item-email",density:"compact",name:"email",label:"Email",modelValue:a.currentItem.email,"onUpdate:modelValue":e[2]||(e[2]=r=>a.currentItem.email=r),rules:t.emailRules,variant:"outlined"},null,8,["modelValue","rules"]),o(c,{density:"compact",name:"endereco",label:"Endereço",modelValue:a.currentItem.endereco,"onUpdate:modelValue":e[3]||(e[3]=r=>a.currentItem.endereco=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[21]||(e[21]=[n("span",null,[s("Endereço "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(A,{density:"compact",name:"escolaridade",items:t.escolaridadeOptions,"item-title":"type","item-value":"value",modelValue:a.currentItem.escolaridade,"onUpdate:modelValue":e[4]||(e[4]=r=>a.currentItem.escolaridade=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[22]||(e[22]=[n("span",null,[s("Escolaridade "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(A,{density:"compact",name:"estado-civil",items:t.estadoCivilOptions,"item-title":"type","item-value":"value",modelValue:a.currentItem.estadoCivil,"onUpdate:modelValue":e[5]||(e[5]=r=>a.currentItem.estadoCivil=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[23]||(e[23]=[n("span",null,[s("Estado Civil "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),h((v(),V(c,{density:"compact",name:"cpf",label:"CPF",modelValue:a.currentItem.cpf,"onUpdate:modelValue":e[6]||(e[6]=r=>a.currentItem.cpf=r),variant:"outlined",rules:i.cpfRules},{label:l(()=>e[24]||(e[24]=[n("span",null,[s("CPF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"###.###.###-##"]]),h((v(),V(c,{density:"compact",name:"rg",label:"RG",modelValue:a.currentItem.rg,"onUpdate:modelValue":e[7]||(e[7]=r=>a.currentItem.rg=r),variant:"outlined",rules:i.rgRules},{label:l(()=>e[25]||(e[25]=[n("span",null,[s("RG "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"####.####.####-#"]]),h((v(),V(c,{density:"compact",name:"cep",label:"CEP",modelValue:a.currentItem.cep,"onUpdate:modelValue":e[8]||(e[8]=r=>a.currentItem.cep=r),variant:"outlined",rules:i.cepRules},{label:l(()=>e[26]||(e[26]=[n("span",null,[s("CEP "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"#####-###"]]),h(o(c,{density:"compact",name:"contato",label:"Contato",modelValue:a.currentItem.contato,"onUpdate:modelValue":e[9]||(e[9]=r=>a.currentItem.contato=r),rules:i.contatoRules,variant:"outlined"},null,8,["modelValue","rules"]),[[y," (##) #####-####"]]),o(S,{items:t.estado,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"estado",label:"Estado",modelValue:a.currentItem.estado,"onUpdate:modelValue":[e[10]||(e[10]=r=>a.currentItem.estado=r),i.getCd],"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:l(()=>e[27]||(e[27]=[n("span",null,[s("Estado "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","onUpdate:modelValue","rules"]),o(S,{items:t.municipio,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"municipio",label:"Município",modelValue:a.currentItem.municipio,"onUpdate:modelValue":e[11]||(e[11]=r=>a.currentItem.municipio=r),"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:l(()=>e[28]||(e[28]=[n("span",null,[s("Municipio "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{density:"compact",name:"banco",label:"Banco",modelValue:a.currentItem.banco,"onUpdate:modelValue":e[12]||(e[12]=r=>a.currentItem.banco=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[29]||(e[29]=[n("span",null,[s("Banco "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{density:"compact",name:"agencia",label:"Agência",modelValue:a.currentItem.agencia,"onUpdate:modelValue":e[13]||(e[13]=r=>a.currentItem.agencia=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[30]||(e[30]=[n("span",null,[s("Agência "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(A,{"max-width":"220px",density:"compact",name:"tipo-conta",items:t.tiposContas,"item-title":"type","item-value":"value",modelValue:a.currentItem.tipoConta,"onUpdate:modelValue":e[14]||(e[14]=r=>a.currentItem.tipoConta=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[31]||(e[31]=[n("span",null,[s("Tipo de Conta "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"conta",label:"Conta",modelValue:a.currentItem.conta,"onUpdate:modelValue":e[15]||(e[15]=r=>a.currentItem.conta=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[32]||(e[32]=[n("span",null,[s("Conta "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"caf",label:"CAF",modelValue:a.currentItem.caf,"onUpdate:modelValue":e[16]||(e[16]=r=>a.currentItem.caf=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[33]||(e[33]=[n("span",null,[s("CAF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"validade-caf",label:"Data de Validade CAF",modelValue:a.currentItem.validadeCaf,"onUpdate:modelValue":e[17]||(e[17]=r=>a.currentItem.validadeCaf=r),variant:"outlined",type:"date","append-inner":"mdi-calendar",rules:t.requiredField},{label:l(()=>e[34]||(e[34]=[n("span",null,[s("Validade Da CAF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(b,{justify:"end",dense:"",class:"w-100 mb-5 mt-3"},{default:l(()=>[o(d,null,{default:l(()=>[o(Y,{modelValue:this.currentItem.sexo,"onUpdate:modelValue":e[18]||(e[18]=r=>this.currentItem.sexo=r),class:"elevation-2"},{default:l(()=>[o(I,{value:"Masculino",color:this.currentItem.sexo==="Masculino"?"#2d47d0":""},{default:l(()=>[e[36]||(e[36]=s("Masculino")),o(g,null,{default:l(()=>e[35]||(e[35]=[s("mdi-gender-male")])),_:1})]),_:1},8,["color"]),o(I,{value:"Feminino",color:this.currentItem.sexo==="Feminino"?"pink":""},{default:l(()=>[e[38]||(e[38]=s("Feminino")),o(g,null,{default:l(()=>e[37]||(e[37]=[s("mdi-gender-female")])),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(H,{class:"upload-container"},{default:l(()=>[o(I,{color:"primary",onClick:i.triggerFileInput,class:"upload-btn"},{default:l(()=>[o(g,{left:""},{default:l(()=>e[39]||(e[39]=[s("mdi-upload")])),_:1}),e[40]||(e[40]=s(" Upload de arquivos "))]),_:1},8,["onClick"]),o(L,{ref:"fileInput",multiple:"",accept:".pdf,.doc,.docx,.jpg,.png",onChange:i.handleFiles,class:"hidden-input"},null,8,["onChange"]),o(b,{density:"compact",class:"file-list",justify:"center"},{default:l(()=>[(v(!0),P(N,null,Z(a.files,(r,k)=>(v(),V(d,{key:k,class:"file-item",cols:"12",md:"2"},{default:l(()=>[o(q,{class:"elevation-0 file-card"},{default:l(()=>[o(R,{class:"pa-0"},{default:l(()=>[o(g,{size:"20",onClick:O=>i.deleteFile(r),class:"d-flex ml-10 cursor-pointer h-auto"},{default:l(()=>e[41]||(e[41]=[s("mdi-close")])),_:2},1032,["onClick"]),o(g,{class:"file-icon"},{default:l(()=>e[42]||(e[42]=[s("mdi-file")])),_:1}),n("span",de,m(r.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["onSubmit"]),o(b,{class:"justify-end dense pt-6"},{default:l(()=>[o(d,{class:"text-end"},{default:l(()=>[o(D,{location:"top",disabled:i.isFormValid},{activator:l(({props:r})=>[n("span",W(X(r)),[o(C,{color:i.isFormValid?"success":"grey",onConfirm:i.localOnSubmit,loading:t.isSubmitting,disabled:!i.isFormValid||t.isSubmitting},{default:l(()=>e[43]||(e[43]=[s("Salvar")])),_:1},8,["color","onConfirm","loading","disabled"])],16)]),default:l(()=>[e[44]||(e[44]=n("span",null,"Preencha todos os campos obrigatórios (*) para habilitar o botão",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])}const me=T(re,[["render",ue],["__scopeId","data-v-fedda650"]]),pe={name:"EditProdutor",components:{ConfirmButton:G},props:{onSubmit:Function,currentItem:{type:Object},files:Array},data:()=>({isSubmitting:!1,estadoCivilOptions:[{type:"Solteiro(a)",value:"solteiro"},{type:"Casado(a)",value:"casado"},{type:"Divorciado(a)",value:"divorciado"},{type:"Separado(a)",value:"separado"},{type:"Viúvo(a)",value:"viuvo"},{type:"União Estável",value:"uniao_estavel"}],escolaridadeOptions:[{type:"Ensino Fundamental Incompleto",value:"fundamental_incompleto"},{type:"Ensino Fundamental Completo",value:"fundamental_completo"},{type:"Ensino Médio Incompleto",value:"medio_incompleto"},{type:"Ensino Médio Completo",value:"medio_completo"},{type:"Ensino Técnico",value:"tecnico"},{type:"Ensino Superior Incompleto",value:"superior_incompleto"},{type:"Ensino Superior Completo",value:"superior_completo"},{type:"Pós-Graduação",value:"pos_graduacao"},{type:"Mestrado",value:"mestrado"},{type:"Doutorado",value:"doutorado"},{type:"Pós-Doutorado",value:"pos_doutorado"}],tiposContas:[{type:"Conta Corrente",value:"Conta Corrente"},{type:"Conta Poupança",value:"Conta Poupança"},{type:"Conta Salário",value:"Conta Salário"},{type:"Conta Digital",value:"Conta Digital"}],estado:[],municipio:[],requiredField:[t=>t!=null&&t!==""||"Obrigatório"],emailRules:[t=>!!t||"E-mail é obrigatório",t=>!t||/.+@.+\..+/.test(t)||"E-mail deve ser válido"]}),computed:{isFormValid(){return!!(this.currentItem.nome&&this.currentItem.dataNascimento&&this.currentItem.endereco&&this.currentItem.escolaridade&&this.currentItem.estadoCivil&&this.currentItem.cpf&&this.currentItem.rg&&this.currentItem.cep&&this.currentItem.estado&&this.currentItem.municipio&&this.currentItem.banco&&this.currentItem.agencia&&this.currentItem.tipoConta&&this.currentItem.conta&&this.currentItem.caf&&this.currentItem.validadeCaf&&this.files)},nomeRules(){return[t=>!!t||"Obrigatório",t=>/^[A-Za-zÀ-ÿ\s]+$/.test(t)||"Insira um nome válido"]},cpfRules(){return[t=>!t||this.validateCpf(t)||"CPF inválido"]},cepRules(){return[t=>!!t||"Obrigatório",t=>this.validateCep(t)||"CEP inválido"]},rgRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateRg(t)||"RG inválido"]},contatoRules(){return[t=>!!t||"Obrigatório",t=>!t||this.validateContato(t)||"N° de contato inválido"]}},methods:{async localOnSubmit(){this.format(),this.currentItem.nome=this.currentItem.nome.toUpperCase();try{this.currentItem.estado=this.currentItem.estado.nome,this.currentItem.municipio=this.currentItem.municipio.nome,this.onSubmit({currentItem:{...this.currentItem},files:[...this.files]})}catch(t){console.log("Erro: ",t)}},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.estado=t.data}catch(t){console.log("Erro: ",t)}},async getCd(t){console.log("Teste de chamada");const e=t.sigla;try{const a=await F.get(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios`);console.log("Municípios: ",a.data),this.municipio=a.data}catch(a){console.log("Erro: ",a)}},triggerFileInput(){this.$refs.fileInput.click()},handleFiles(){const t=Array.from(event.target.files);this.files.push(...t),console.log(this.files)},deleteFile(t){this.files.pop(t)},format(){var t,e,a,p;this.currentItem.cpf=(t=this.currentItem.cpf)==null?void 0:t.replace(/\.|\-/g,""),this.currentItem.cep=(e=this.currentItem.cep)==null?void 0:e.replace(/\.|\-/g,""),this.currentItem.rg=(a=this.currentItem.rg)==null?void 0:a.replace(/\.|\-/g,""),this.currentItem.contato=(p=this.currentItem.contato)==null?void 0:p.replace(/\.|\-|\(|\)|\s/g,"")},validateCpf(t){const e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1+$/.test(t))return!1;let a=0;for(let i=0;i<9;i++)a+=parseInt(e.charAt(i))*(10-i);if((a%11<2?0:11-a%11)!==parseInt(e.charAt(9)))return!1;a=0;for(let i=0;i<10;i++)a+=parseInt(e.charAt(i))*(11-i);return!((a%11<2?0:11-a%11)!==parseInt(e.charAt(10))||e.length!==11)},validateCep(t){return!(t.replace(/\D/g,"").length!==8||!/^[0-9]{5}-?[0-9]{3}$/.test(t))},validateRg(t){return t.replace(/\D/g,"").length!==13?!1:/^[0-9]{4}\.[0-9]{4}\.[0-9]{4}-[0-9]{1}$/.test(t)},validateContato(t){return t.replace(/\D/g,"").length!==11?!1:/^\s?\(?\d{2}\)?\s?\d{5}-\d{4}$/.test(t)}},mounted(){this.getUF()}},ce={class:"pa-4 pr-12 pl-12"},fe={class:"grid-container"},ge={class:"file-name"};function ve(t,e,a,p,f,i){const C=E("ConfirmButton"),y=J("mask");return v(),P("div",ce,[o(Q,{onSubmit:K(i.localOnSubmit,["prevent"]),ref:"formRef"},{default:l(()=>[n("div",fe,[o(c,{class:"flex-item-nome",density:"compact",name:"nome",modelValue:a.currentItem.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>a.currentItem.nome=r),variant:"outlined",rules:i.nomeRules},{label:l(()=>e[19]||(e[19]=[n("span",null,[s("Nome "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"data_de_nascimento",label:"Data de nascimento",modelValue:a.currentItem.dataNascimento,"onUpdate:modelValue":e[1]||(e[1]=r=>a.currentItem.dataNascimento=r),variant:"outlined",type:"date",rules:t.requiredField},{label:l(()=>e[20]||(e[20]=[n("span",null,[s("Data de Nascimento "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"flex-item-email",density:"compact",name:"email",label:"Email",modelValue:a.currentItem.email,"onUpdate:modelValue":e[2]||(e[2]=r=>a.currentItem.email=r),rules:t.emailRules,variant:"outlined"},null,8,["modelValue","rules"]),o(c,{density:"compact",name:"endereco",label:"Endereço",modelValue:a.currentItem.endereco,"onUpdate:modelValue":e[3]||(e[3]=r=>a.currentItem.endereco=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[21]||(e[21]=[n("span",null,[s("Endereço "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(A,{density:"compact",name:"escolaridade",items:t.escolaridadeOptions,"item-title":"type","item-value":"value",modelValue:a.currentItem.escolaridade,"onUpdate:modelValue":e[4]||(e[4]=r=>a.currentItem.escolaridade=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[22]||(e[22]=[n("span",null,[s("Escolaridade "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(A,{density:"compact",name:"estado-civil",items:t.estadoCivilOptions,"item-title":"type","item-value":"value",modelValue:a.currentItem.estadoCivil,"onUpdate:modelValue":e[5]||(e[5]=r=>a.currentItem.estadoCivil=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[23]||(e[23]=[n("span",null,[s("Estado Civil "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),h((v(),V(c,{density:"compact",name:"cpf",label:"CPF",modelValue:a.currentItem.cpf,"onUpdate:modelValue":e[6]||(e[6]=r=>a.currentItem.cpf=r),variant:"outlined",rules:i.cpfRules},{label:l(()=>e[24]||(e[24]=[n("span",null,[s("CPF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"###.###.###-##"]]),h((v(),V(c,{density:"compact",name:"rg",label:"RG",modelValue:a.currentItem.rg,"onUpdate:modelValue":e[7]||(e[7]=r=>a.currentItem.rg=r),variant:"outlined",rules:i.rgRules},{label:l(()=>e[25]||(e[25]=[n("span",null,[s("RG "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"####.####.####-#"]]),h((v(),V(c,{density:"compact",name:"cep",label:"CEP",modelValue:a.currentItem.cep,"onUpdate:modelValue":e[8]||(e[8]=r=>a.currentItem.cep=r),variant:"outlined",rules:i.cepRules},{label:l(()=>e[26]||(e[26]=[n("span",null,[s("CEP "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"])),[[y,"#####-###"]]),h(o(c,{density:"compact",name:"contato",label:"Contato",modelValue:a.currentItem.contato,"onUpdate:modelValue":e[9]||(e[9]=r=>a.currentItem.contato=r),rules:i.contatoRules,variant:"outlined"},null,8,["modelValue","rules"]),[[y," (##) #####-####"]]),o(S,{items:t.estado,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"estado",label:"Estado",modelValue:a.currentItem.estado,"onUpdate:modelValue":[e[10]||(e[10]=r=>a.currentItem.estado=r),i.getCd],"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:l(()=>e[27]||(e[27]=[n("span",null,[s("Estado "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","onUpdate:modelValue","rules"]),o(S,{items:t.municipio,"item-title":"nome","item-value":"id","return-object":"",density:"compact",name:"municipio",label:"Município",modelValue:a.currentItem.municipio,"onUpdate:modelValue":e[11]||(e[11]=r=>a.currentItem.municipio=r),"menu-props":{maxHeight:"250px",top:!1},variant:"outlined",clearable:"",rules:t.requiredField},{label:l(()=>e[28]||(e[28]=[n("span",null,[s("Municipio "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{density:"compact",name:"banco",label:"Banco",modelValue:a.currentItem.banco,"onUpdate:modelValue":e[12]||(e[12]=r=>a.currentItem.banco=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[29]||(e[29]=[n("span",null,[s("Banco "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{density:"compact",name:"agencia",label:"Agência",modelValue:a.currentItem.agencia,"onUpdate:modelValue":e[13]||(e[13]=r=>a.currentItem.agencia=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[30]||(e[30]=[n("span",null,[s("Agência "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(A,{"max-width":"220px",density:"compact",name:"tipo-conta",items:t.tiposContas,"item-title":"type","item-value":"value",modelValue:a.currentItem.tipoConta,"onUpdate:modelValue":e[14]||(e[14]=r=>a.currentItem.tipoConta=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[31]||(e[31]=[n("span",null,[s("Tipo de Conta "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["items","modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"conta",label:"Conta",modelValue:a.currentItem.conta,"onUpdate:modelValue":e[15]||(e[15]=r=>a.currentItem.conta=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[32]||(e[32]=[n("span",null,[s("Conta "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{"max-width":"250px",density:"compact",name:"caf",label:"CAF",modelValue:a.currentItem.caf,"onUpdate:modelValue":e[16]||(e[16]=r=>a.currentItem.caf=r),variant:"outlined",rules:t.requiredField},{label:l(()=>e[33]||(e[33]=[n("span",null,[s("CAF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(c,{class:"custom-date-field",density:"compact",name:"validade-caf",label:"Data de Validade CAF",modelValue:a.currentItem.validadeCaf,"onUpdate:modelValue":e[17]||(e[17]=r=>a.currentItem.validadeCaf=r),variant:"outlined",type:"date","append-inner":"mdi-calendar",rules:t.requiredField},{label:l(()=>e[34]||(e[34]=[n("span",null,[s("Validade Da CAF "),n("span",{style:{color:"red"}},"*")],-1)])),_:1},8,["modelValue","rules"]),o(b,{justify:"end",dense:"",class:"w-100 mb-5 mt-3"},{default:l(()=>[o(d,null,{default:l(()=>[o(Y,{modelValue:this.currentItem.sexo,"onUpdate:modelValue":e[18]||(e[18]=r=>this.currentItem.sexo=r),class:"elevation-2"},{default:l(()=>[o(I,{value:"Masculino",color:this.currentItem.sexo==="Masculino"?"#2d47d0":""},{default:l(()=>[e[36]||(e[36]=s("Masculino")),o(g,null,{default:l(()=>e[35]||(e[35]=[s("mdi-gender-male")])),_:1})]),_:1},8,["color"]),o(I,{value:"Feminino",color:this.currentItem.sexo==="Feminino"?"pink":""},{default:l(()=>[e[38]||(e[38]=s("Feminino")),o(g,null,{default:l(()=>e[37]||(e[37]=[s("mdi-gender-female")])),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(H,{class:"upload-container"},{default:l(()=>[o(I,{color:"primary",onClick:i.triggerFileInput,class:"upload-btn"},{default:l(()=>[o(g,{left:""},{default:l(()=>e[39]||(e[39]=[s("mdi-upload")])),_:1}),e[40]||(e[40]=s(" Upload de arquivos "))]),_:1},8,["onClick"]),o(L,{ref:"fileInput",multiple:"",accept:".pdf,.doc,.docx,.jpg,.png",onChange:i.handleFiles,class:"hidden-input"},null,8,["onChange"]),o(b,{density:"compact",class:"file-list",justify:"center"},{default:l(()=>[(v(!0),P(N,null,Z(a.files,(r,k)=>(v(),V(d,{key:k,class:"file-item",cols:"12",md:"2"},{default:l(()=>[o(q,{class:"elevation-0 file-card"},{default:l(()=>[o(R,{class:"pa-0"},{default:l(()=>[o(g,{size:"20",onClick:O=>i.deleteFile(r),class:"d-flex ml-10 cursor-pointer h-auto"},{default:l(()=>e[41]||(e[41]=[s("mdi-close")])),_:2},1032,["onClick"]),o(g,{class:"file-icon"},{default:l(()=>e[42]||(e[42]=[s("mdi-file")])),_:1}),n("span",ge,m(r.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["onSubmit"]),o(b,{class:"justify-end dense pt-6"},{default:l(()=>[o(d,{class:"text-end"},{default:l(()=>[o(D,{location:"top",disabled:i.isFormValid},{activator:l(({props:r})=>[n("span",W(X(r)),[o(C,{color:i.isFormValid?"success":"grey",onConfirm:i.localOnSubmit,loading:t.isSubmitting,disabled:!i.isFormValid||t.isSubmitting},{default:l(()=>e[43]||(e[43]=[s("Salvar")])),_:1},8,["color","onConfirm","loading","disabled"])],16)]),default:l(()=>[e[44]||(e[44]=n("span",null,"Preencha todos os campos obrigatórios (*) para habilitar o botão",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})])}const ye=T(pe,[["render",ve],["__scopeId","data-v-f0992409"]]),Ce={name:"ProdutorExpand",props:{produtorData:Object},data:()=>({productors:[],headers:[{title:"Arquivo",align:"start",sortable:!0,value:"fileName"},{title:"Tipo",align:"start",sortable:!0,value:"fileType"},{title:"Baixar",align:"start",sortable:!0,value:"download"},{title:"Remover",align:"start",sortable:!0,value:"remove"}]}),methods:{getAge(t){const e=new Date,a=new Date(t);let p=e.getFullYear()-a.getFullYear();const f=e.getMonth()-a.getMonth();return(f<0||f===0&&e.getDate()<a.getDate())&&p--,p},downloadFile(t){const e=`http://localhost:8080/document/download/${t==null?void 0:t.fileName}`,a=document.createElement("a");a.href=e,a.download=t.fileName,document.body.appendChild(a),a.click(),document.body.removeChild(a)},async deleteFile(t){const e=B();console.log("Id do arquivo: ",t.id);try{const a=await F.delete(`/document/delete/${t.id}/${this.produtorData.id}`);if(a.status!==204)throw new Error("Erro: ",a.status);const p=this.produtorData.documentos.findIndex(f=>f.id===t.id);p!==-1&&this.produtorData.documentos.splice(p,1),e.success("Arquivo removido com sucesso!")}catch(a){e.error("Erro ao remover arquivo: ",a)}},async getProductors(){try{const t=await F.get("/public/produtores");Array.isArray(t.data)?this.productors=t.data:(console.log("A resposta da API não é um Array"),this.productors=[])}catch(t){console.log("Error: ",t),this.productors=[]}}},mounted(){var t;this.getProductors(),console.log((t=this.produtorData)==null?void 0:t.documentos)}},be={align:"start",class:"pa-2"},Ve={align:"start",class:"pa-2"},Ie={align:"start",class:"pa-2"},Fe={align:"start",class:"pa-2"};function De(t,e,a,p,f,i){return v(),P(N,null,[e[30]||(e[30]=n("h3",{class:"mt-2"},"Detalhes de Produtor",-1)),n("h4",be,[e[1]||(e[1]=s(" Dados Pessoais ")),o(g,null,{default:l(()=>e[0]||(e[0]=[s("mdi-file-account")])),_:1})]),o(b,{dense:"",style:{height:"150px"},class:"border-md pa-2"},{default:l(()=>[o(d,{cols:"3",align:"start",class:"h-50"},{default:l(()=>[e[2]||(e[2]=n("h4",null,"Nome:",-1)),n("p",null,m(a.produtorData.nome),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-50"},{default:l(()=>[e[3]||(e[3]=n("h4",null,"Idade:",-1)),n("p",null,m(i.getAge(a.produtorData.dataNascimento)),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-50"},{default:l(()=>[e[4]||(e[4]=n("h4",null,"Sexo:",-1)),n("p",null,m(a.produtorData.sexo),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-50"},{default:l(()=>[e[5]||(e[5]=n("h4",null,"Email:",-1)),n("p",null,m(a.produtorData.email),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:l(()=>[e[6]||(e[6]=n("h4",null,"Contato:",-1)),n("p",null,m(a.produtorData.contato),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:l(()=>[e[7]||(e[7]=n("h4",null,"CPF:",-1)),n("p",null,m(a.produtorData.cpf),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-50"},{default:l(()=>[e[8]||(e[8]=n("h4",null,"RG:",-1)),n("p",null,m(a.produtorData.rg),1)]),_:1})]),_:1}),n("h4",Ve,[e[10]||(e[10]=s(" Endereço ")),o(g,null,{default:l(()=>e[9]||(e[9]=[s("mdi-home")])),_:1})]),o(b,{dense:"",style:{height:"100px"},class:"border-md pa-2"},{default:l(()=>[o(d,{cols:"1",align:"start",class:"h-75"},{default:l(()=>[e[11]||(e[11]=n("h4",null,"Estado:",-1)),n("p",null,m(a.produtorData.estado),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:l(()=>[e[12]||(e[12]=n("h4",null,"Município:",-1)),n("p",null,m(a.produtorData.municipio),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-75"},{default:l(()=>[e[13]||(e[13]=n("h4",null,"Endereço:",-1)),n("p",null,m(a.produtorData.endereco),1)]),_:1}),o(d,{cols:"1",align:"start",class:"h-75"},{default:l(()=>[e[14]||(e[14]=n("h4",null,"CEP:",-1)),n("p",null,m(a.produtorData.cep),1)]),_:1})]),_:1}),o(b,{dense:"",style:{height:"50vh",width:"452px","margin-top":"34px","margin-bottom":"-50px","border-radius":"10px"},class:"float-end"},{default:l(()=>[o($,{items:a.produtorData.documentos,headers:t.headers,class:"h-75",align:"start",hover:!0,style:{"background-color":"#f4f1e4"}},{top:l(()=>e[15]||(e[15]=[n("h4",{align:"center",class:"pa-2"}," Documentos do produtor ",-1)])),"item.download":l(({item:C})=>[o(D,{location:"top"},{activator:l(({props:y})=>[o(I,U({icon:""},y,{onClick:r=>i.downloadFile(C),class:"elevation-0",color:"#f4f1e4"}),{default:l(()=>[o(g,{color:"primary"},{default:l(()=>e[16]||(e[16]=[s("mdi-download-box")])),_:1})]),_:2},1040,["onClick"])]),default:l(()=>[e[17]||(e[17]=n("span",null,"Clique para baixar um arquivo",-1))]),_:2},1024)]),"item.remove":l(({item:C})=>[o(D,{location:"top"},{activator:l(({props:y})=>[o(I,U({icon:""},y,{onClick:r=>i.deleteFile(C),class:"elevation-0",color:"#f4f1e4"}),{default:l(()=>[o(g,{color:"red"},{default:l(()=>e[18]||(e[18]=[s("mdi-delete")])),_:1})]),_:2},1040,["onClick"])]),default:l(()=>[e[19]||(e[19]=n("span",null,"Clique para remover um arquivo",-1))]),_:2},1024)]),_:2},1032,["items","headers"])]),_:1}),n("h4",Ie,[e[21]||(e[21]=s(" Dados Bancários ")),o(g,null,{default:l(()=>e[20]||(e[20]=[s("mdi-bank")])),_:1})]),o(b,{dense:"",style:{height:"100px",width:"50vw"},class:"border-md pa-2"},{default:l(()=>[o(d,{cols:"3",align:"start",class:"h-75"},{default:l(()=>[e[22]||(e[22]=n("h4",null,"Banco:",-1)),n("p",null,m(a.produtorData.banco),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:l(()=>[e[23]||(e[23]=n("h4",null,"Agência:",-1)),n("p",null,m(a.produtorData.agencia),1)]),_:1}),o(d,{cols:"3",align:"start",class:"h-75"},{default:l(()=>[e[24]||(e[24]=n("h4",null,"Tipo de Conta:",-1)),n("p",null,m(a.produtorData.tipoConta),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:l(()=>[e[25]||(e[25]=n("h4",null,"Conta:",-1)),n("p",null,m(a.produtorData.conta),1)]),_:1})]),_:1}),n("h4",Fe,[e[27]||(e[27]=s(" Dados da CAF ")),o(g,null,{default:l(()=>e[26]||(e[26]=[s("mdi-text-box-multiple-outline")])),_:1})]),o(b,{dense:"",style:{height:"120px",width:"50vw"},class:"border-md pa-2"},{default:l(()=>[o(d,{cols:"3",align:"start",class:"h-75"},{default:l(()=>[e[28]||(e[28]=n("h4",null,"CAF:",-1)),n("p",null,m(a.produtorData.caf),1)]),_:1}),o(d,{cols:"2",align:"start",class:"h-75"},{default:l(()=>[e[29]||(e[29]=n("h4",null,"Validade da CAF:",-1)),n("p",null,m(a.produtorData.validadeCaf),1)]),_:1})]),_:1})],64)}const he=T(Ce,[["render",De]]),we={name:"CadastroProdutor",components:{NavBar:_,NovoProdutor:me,ProdutorExpand:he,EditProdutor:ye,BtnComeBack:ne},data:()=>({cafVencida:null,cafProxVenci:null,dialog:{create:!1,update:!1},search:"",singleExpand:!1,showFilters:!1,productors:[],headers:[{text:"Editar",align:"center",value:"edit"},{title:"Nome do Produtor",align:"center",sortable:!0,value:"nome"},{title:"Endereço",align:"center",sortable:!0,value:"endereco"},{title:"CAF",align:"center",sortable:!0,value:"validadeCaf"},{title:"CPF",align:"center",sortable:!0,value:"cpf"},{title:"CEP",align:"center",sortable:!0,value:"cep"},{title:"Estado",align:"center",sortable:!0,value:"estado"},{title:"Municipio",align:"center",sortable:!0,value:"municipio"}],newItem:{sexo:"Masculino"},files:[],selectedRow:{},expanded:[],filterActive:!1,filters:{estado:{value:null,compareType:"equal",prop:"estado"},municipio:{value:null,compareType:"equal",prop:"municipio"},sexo:{value:null,compareType:"equal",prop:"sexo"},cpf:{value:null,compareType:"equal",prop:"cpf"},cep:{value:null,compareType:"equal",prop:"cep"},estado_civil:{value:null,compareType:"equal",prop:"estadoCivil"}},uf:[],municipios:[],sexoOptions:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"}]}),watch:{filteredProductors:function(){this.validateCafs()},deep:!0},computed:{filteredProductors(){return this.productors.filter(t=>this.filters.estado.value?t.estado===this.filters.estado.value:!0).filter(t=>this.filters.municipio.value?t.municipio===this.filters.municipio.value:!0).filter(t=>this.filters.sexo.value?t.sexo===this.filters.sexo.value:!0)}},methods:{formatData(t){return ee.formatData(t)},validateCafs(){this.cafVencida=0,this.cafProxVenci=0;const t=30,e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(!this.filteredProductors||this.filteredProductors.length===0){console.warn("Nenhum produtor encontrado.");return}this.productors.forEach(p=>{const f=p==null?void 0:p.validadeCaf;f||console.warn("Data inválida: ",f);const i=new Date(f+"T00:00:00Z"),C=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate());console.log("Data da caf: ",C);const r=(C.getTime()-a.getTime())/(1e3*60*60*24);r>=0&&r<=t?this.cafProxVenci++:r<0&&this.cafVencida++,console.log(this.cafProxVenci),console.log(this.cafVencida)})},uniqueValidateCaf(t){const a=new Date,p=new Date(a.getFullYear(),a.getMonth(),a.getDate()),f=new Date(t+"T00:00:00Z"),y=(new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()).getTime()-p.getTime())/(1e3*60*60*24);return y>=0&&y<=30?1:y>30?2:3},onExpand(t){this.expanded!==t&&(this.expanded=t)},clearFilters(){Object.keys(this.filters).forEach(t=>{this.filters[t].value=null}),this.filterActive=!1,this.filtered=[]},async getProductors(){try{const t=await F.get("/public/produtores");console.log(t.data),this.productors=t.data}catch(t){console.log("Error: ",t),this.productors=[]}},async createProductor(){const t=B();try{const e=new FormData;this.files.forEach(p=>{e.append("file",p)}),e.append("produtor",JSON.stringify(this.newItem));const a=await F.post("/public/produtores/produtor",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(a.data),a.status!==201)throw new Error(`Erro: ${a.status}`);t.success("Produtor cadastrado com sucesso!")}catch(e){console.error("Erro: ",e),t.error("Erro ao cadastrar produtor: ",e)}finally{this.dialog.create=!1,this.getProductors()}},async updateProductor(t){const e=B(),{currentItem:a,files:p}=t;try{const f=new FormData;p.forEach(C=>{console.log("Arquivo enviado: ",C),f.append("file",C)}),f.append("produtor",JSON.stringify(a));const i=await F.put(`/public/produtores/atualizar/${a.id}`,f,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(i.data),i.status!==200)throw new Error(`Erro: ${i.status}`);e.success("Produtor atualizado com sucesso!")}catch(f){console.error("Erro: ",f),e.error("Erro ao atualizar produtor: ",f)}finally{this.dialog.update=!1,this.getProductors()}},onSelectRow(t,e){e==="update"&&(this.selectedRow=JSON.parse(JSON.stringify({...t})),this.dialog.update=!0),console.log("Linha selecionada: ",this.selectedRow)},async getUF(){try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");console.log(t.data),this.uf=t.data}catch(t){console.log("Erro: ",t)}},async getCd(){console.log("Teste de chamada");try{const t=await F.get("https://servicodados.ibge.gov.br/api/v1/localidades/municipios");console.log("Municípios: ",t.data),this.municipios=t.data}catch(t){console.log("Erro: ",t)}}},mounted(){this.getProductors(),this.getUF(),this.getCd()}},Pe={class:"d-flex align-center"},Ee={class:"d-flex flex-column ml-3 status-text align-start"},Ue={key:0,class:"text-error text-xs font-weight-medium"},Ae={key:1,class:"text-warning text-xs font-weight-medium"},xe={style:{"background-color":"#f09900",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},Se={style:{"background-color":"#57a340",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},ke={style:{"background-color":"#e60200",height:"35px",width:"90px","padding-top":"6px","font-weight":"bold"}},qe={colspan:9,style:{"background-color":"#37622a"},class:"text-white"};function Re(t,e,a,p,f,i){const C=E("NavBar"),y=E("BtnComeBack"),r=E("ProdutorExpand"),k=E("NovoProdutor"),O=E("EditProdutor");return v(),P(N,null,[o(C),o(y),e[29]||(e[29]=n("h1",{style:{color:"#57a340","margin-top":"10px",padding:"30px","font-size":"3rem"}},"Cadastro de Produtores",-1)),o(b,{justify:"center"},{default:l(()=>[o(d,{cols:"12"},{default:l(()=>[o($,{items:i.filteredProductors,headers:t.headers,search:t.search,"show-expand":"","single-expand":"",expanded:t.expanded,"onUpdate:expanded":[e[6]||(e[6]=u=>t.expanded=u),i.onExpand],"fixed-header":!0,height:"700px"},{top:l(()=>[o(b,{class:"mt-2 mb-8 mx-3"},{default:l(()=>[o(d,{cols:"5"},{default:l(()=>[o(c,{class:"border rounded",dense:"",outlined:"","hide-details":"",modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=u=>t.search=u),label:"Pesquisar","append-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{class:"text-end",cols:"2"},{default:l(()=>[o(te,{location:"top start",bordered:"",overlap:""},{default:l(()=>[o(I,{class:"elevation-0",onClick:e[1]||(e[1]=u=>t.showFilters=!t.showFilters)},{default:l(()=>[t.showFilters?(v(),V(g,{key:1,left:"",size:"25px"},{default:l(()=>e[12]||(e[12]=[s("mdi-filter-off")])),_:1})):(v(),V(g,{key:0,size:"25px",left:""},{default:l(()=>e[11]||(e[11]=[s("mdi-filter")])),_:1})),e[13]||(e[13]=s(" FILTROS "))]),_:1})]),_:1})]),_:1}),o(d,{class:"button-group mr-4",align:"end"},{default:l(()=>[o(D,{location:"top"},{activator:l(({props:u})=>[o(I,U({color:"success",class:"elevation-3 compact-btn ml-3","min-width":"25%",onClick:e[2]||(e[2]=w=>t.dialog.create=!0)},u),{default:l(()=>[o(g,{small:"",class:"compact-icon",left:""},{default:l(()=>e[14]||(e[14]=[s("mdi-plus")])),_:1}),e[15]||(e[15]=n("div",{class:"d-flex flex-column compact-btn-text",style:{"font-size":"0.6rem"}},[n("span",null,"Novo"),s(),n("span",null,"Produtor")],-1))]),_:2},1040)]),default:l(()=>[e[16]||(e[16]=n("span",null,"Clique para adicionar um produtor",-1))]),_:1})]),_:1}),o(d,{cols:"12"},{default:l(()=>[o(le,null,{default:l(()=>[h(o(q,{variant:"outlined",height:"150px"},{default:l(()=>[e[18]||(e[18]=n("h4",{class:"ml-4 mt-4",align:"start"},"Filtrar por",-1)),o(b,{dense:"",class:"py-2 px-4"},{default:l(()=>[o(d,{cols:2},{default:l(()=>[o(S,{density:"compact",variant:"outlined",items:t.uf,label:"Estado","item-title":"nome","item-value":"nome",modelValue:t.filters.estado.value,"onUpdate:modelValue":e[3]||(e[3]=u=>t.filters.estado.value=u),outlined:"",dense:"",clearable:""},null,8,["items","modelValue"])]),_:1}),o(d,{cols:2},{default:l(()=>[o(S,{density:"compact",variant:"outlined",items:t.municipios,label:"Município","item-title":"nome","item-value":"nome",modelValue:t.filters.municipio.value,"onUpdate:modelValue":e[4]||(e[4]=u=>t.filters.municipio.value=u),clearable:""},null,8,["items","modelValue"])]),_:1}),o(d,{cols:1},{default:l(()=>[o(A,{density:"compact",items:t.sexoOptions,label:"Sexo","item-title":"label","item-value":"value",modelValue:t.filters.sexo.value,"onUpdate:modelValue":e[5]||(e[5]=u=>t.filters.sexo.value=u),variant:"outlined",dense:"",clearable:""},null,8,["items","modelValue"])]),_:1})]),_:1}),o(oe,null,{default:l(()=>[o(b,{dense:""},{default:l(()=>[o(d,{class:"text-end",height:"200"},{default:l(()=>[o(I,{align:"start",justify:"center",class:"pb-8",color:"error",text:"",elevation:"0",onClick:i.clearFilters},{default:l(()=>e[17]||(e[17]=[s(" Limpar filtros ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},512),[[ae,t.showFilters]])]),_:1})]),_:1})]),_:1}),o(b,{class:"mb-5 pl-1 ml-4"},{default:l(()=>[t.cafProxVenci>0||t.cafVencida>0?(v(),V(d,{key:0,cols:"auto",class:"pa-0 mr-4"},{default:l(()=>[e[20]||(e[20]=n("span",{class:"status-text"},"CAF",-1)),n("div",Pe,[o(g,{small:"",color:"error",left:""},{default:l(()=>e[19]||(e[19]=[s("mdi-alert")])),_:1}),n("div",Ee,[t.cafVencida>0?(v(),P("span",Ue,m(t.cafVencida)+" "+m(t.cafVencida===1?"CAF":"CAFS")+" vencida(s) ",1)):x("",!0),t.cafProxVenci>0?(v(),P("span",Ae,m(t.cafProxVenci)+" "+m(t.cafProxVenci===1?"CAF":"CAFS")+" próxima(s) do vencimento ",1)):x("",!0)])])]),_:1})):x("",!0)]),_:1})]),"item.edit":l(({item:u})=>[o(D,{location:"top"},{activator:l(({props:w})=>[o(I,U({icon:""},w,{onClick:Te=>i.onSelectRow(u,"update"),class:"elevation-0"}),{default:l(()=>[o(g,{color:"green"},{default:l(()=>e[21]||(e[21]=[s("mdi-pencil")])),_:1})]),_:2},1040,["onClick"])]),default:l(()=>[e[22]||(e[22]=n("span",null,"Clique para editar um Produtor",-1))]),_:2},1024)]),"item.validadeCaf":l(({item:u})=>[o(D,{location:"top"},{activator:l(({props:w})=>[i.uniqueValidateCaf(u.validadeCaf)===1?(v(),V(M,U({key:0,color:"white"},w),{default:l(()=>[n("span",xe,m(i.formatData(u.validadeCaf)),1)]),_:2},1040)):x("",!0)]),default:l(()=>[e[23]||(e[23]=n("span",null,"A CAF está próxima de vencer",-1))]),_:2},1024),o(D,{location:"top"},{activator:l(({props:w})=>[i.uniqueValidateCaf(u.validadeCaf)===2?(v(),V(M,U({key:0,color:"white"},w),{default:l(()=>[n("span",Se,m(i.formatData(u.validadeCaf)),1)]),_:2},1040)):x("",!0)]),default:l(()=>[e[24]||(e[24]=n("span",null,"A CAF está longe de vencer",-1))]),_:2},1024),o(D,{location:"top"},{activator:l(({props:w})=>[i.uniqueValidateCaf(u.validadeCaf)===3?(v(),V(M,U({key:0,color:"white"},w),{default:l(()=>[n("span",ke,m(i.formatData(u.validadeCaf)),1)]),_:2},1040)):x("",!0)]),default:l(()=>[e[25]||(e[25]=n("span",null,"CAF vencida",-1))]),_:2},1024)]),"expanded-row":l(({item:u})=>[n("tr",null,[n("td",qe,[s(m(console.log(u))+" ",1),o(r,{produtorData:JSON.parse(JSON.stringify(u))},null,8,["produtorData"])])])]),_:2},1032,["items","headers","search","expanded","onUpdate:expanded"]),o(j,{modelValue:t.dialog.create,"onUpdate:modelValue":e[8]||(e[8]=u=>t.dialog.create=u)},{default:l(()=>[o(q,{class:"card-form"},{default:l(()=>[o(R,{class:"sticky-title title-border"},{default:l(()=>[e[27]||(e[27]=s(" Cadastro de Produtor ")),o(z),o(I,{icon:"",class:"btn-close elevation-0",onClick:e[7]||(e[7]=u=>t.dialog.create=!1)},{default:l(()=>[o(g,{prepend:""},{default:l(()=>e[26]||(e[26]=[s(" mdi-close ")])),_:1})]),_:1})]),_:1}),o(k,{currentItem:t.newItem,onSubmit:i.createProductor,files:t.files,dialogAtivo:t.dialog.create},null,8,["currentItem","onSubmit","files","dialogAtivo"])]),_:1})]),_:1},8,["modelValue"]),o(j,{modelValue:t.dialog.update,"onUpdate:modelValue":e[10]||(e[10]=u=>t.dialog.update=u)},{default:l(()=>[o(q,{class:"card-form"},{default:l(()=>[o(R,{class:"sticky-title title-border"},{default:l(()=>[s(" Editar Produtor: "+m(t.selectedRow.id)+" ",1),o(z),o(I,{icon:"",class:"btn-close elevation-0",onClick:e[9]||(e[9]=u=>t.dialog.update=!t.dialog.update)},{default:l(()=>[o(g,{prepend:""},{default:l(()=>e[28]||(e[28]=[s(" mdi-close ")])),_:1})]),_:1})]),_:1}),o(O,{currentItem:t.selectedRow,onSubmit:i.updateProductor,files:t.files},null,8,["currentItem","onSubmit","files"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}const ze=T(we,[["render",Re],["__scopeId","data-v-be5d3e45"]]);export{ze as default};
